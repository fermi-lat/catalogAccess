<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>quantity.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.18 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>quantity.h</h1><a href="quantity_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 
00012 <span class="preprocessor">#ifndef catalogAccess_quant_h</span>
00013 <span class="preprocessor"></span><span class="preprocessor">#define catalogAccess_quant_h</span>
00014 <span class="preprocessor"></span>
00015 <span class="comment">// can compile without first three</span>
00016 <span class="comment">//#include &lt;exception&gt;</span>
00017 <span class="comment">//#include &lt;string&gt;</span>
00018 <span class="comment">//#include &lt;math.h&gt;      //for cos() sin () constant M_PI</span>
00019 <span class="preprocessor">#include &lt;limits&gt;</span>     <span class="comment">//for std::numeric_limits</span>
00020 <span class="preprocessor">#include &lt;iostream&gt;</span>   <span class="comment">//for cout, cerr</span>
00021 <span class="preprocessor">#include &lt;sstream&gt;</span>    <span class="comment">//for ostringstream </span>
00022 <span class="preprocessor">#include &lt;vector&gt;</span>
00023 
00024 <span class="comment">//#define DEBUG_CAT</span>
<a name="l00025"></a><a class="code" href="quantity_8h.html#a0">00025</a> <span class="preprocessor">#define NO_SEL_CUT  1.79E308    // just below maximum double on 8 bytes</span>
00026 <span class="preprocessor"></span><span class="comment">// could use Infinite function isinf() but is it compiling one every platform ?</span>
00027 <span class="keyword">namespace </span>catalogAccess {
00028 
00029 <span class="comment">/**********************************************************************/</span>
00030 <span class="comment">/*  GLOBAL DEFINITONS for catalogAccess                               */</span>
00031 <span class="comment">/**********************************************************************/</span>
00032 
00033 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> Min_Axis = 1./3600.; <span class="comment">// just below 0.00028 degree</span>
00034 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> Min_Prec = std::numeric_limits&lt;double&gt;::epsilon();
00035 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> NearZero = 10*std::numeric_limits&lt;double&gt;::min();
00036 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> Max_Test = std::numeric_limits&lt;unsigned long&gt;::max();
00037 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> Angle_Conv = M_PI/180.;
00038 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> MissNAN = 0/0.;
00039 
00040 <span class="keyword">enum</span> { <a class="code" href="namespacecatalog_access.html#a31a7">IS_OK</a> = 1, <a class="code" href="namespacecatalog_access.html#a31a8">IS_VOID</a> = 0,
00041       <a class="code" href="namespacecatalog_access.html#a31a9">IMPORT_BIS</a> = -1, <a class="code" href="namespacecatalog_access.html#a31a10">IMPORT_NEED</a> = -2, <a class="code" href="namespacecatalog_access.html#a31a11">BAD_CATNAME</a> = -3, <a class="code" href="namespacecatalog_access.html#a31a12">BAD_FILENAME</a> = -4,
00042      <a class="code" href="namespacecatalog_access.html#a31a13">BAD_FILETYPE</a> = -5, <a class="code" href="namespacecatalog_access.html#a31a14">BAD_FITS</a> = -6, <a class="code" href="namespacecatalog_access.html#a31a15">BAD_FILELINE</a> = -7, <a class="code" href="namespacecatalog_access.html#a31a16">BAD_URL</a> = -8,
00043     <a class="code" href="namespacecatalog_access.html#a31a17">NO_RA_DEC</a> = -9,
00044    <a class="code" href="namespacecatalog_access.html#a31a18">BAD_ROW</a> = -10, <a class="code" href="namespacecatalog_access.html#a31a19">BAD_QUANT_NAME</a> = -11, <a class="code" href="namespacecatalog_access.html#a31a20">BAD_QUANT_TYPE</a> = -12, <a class="code" href="namespacecatalog_access.html#a31a21">NO_QUANT_ERR</a>= -13,
00045   <a class="code" href="namespacecatalog_access.html#a31a22">BAD_RA</a> = -14, <a class="code" href="namespacecatalog_access.html#a31a23">BAD_DEC</a> = -15, <a class="code" href="namespacecatalog_access.html#a31a24">BAD_ROT</a> = -16, <a class="code" href="namespacecatalog_access.html#a31a25">BAD_AXIS</a> = -17,
00046  <a class="code" href="namespacecatalog_access.html#a31a26">BAD_SEL_LIM</a> = -20, <a class="code" href="namespacecatalog_access.html#a31a27">BAD_SEL_QUANT</a> = -21 };
00047 
00048 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="namespacecatalog_access.html#a0">verbosity</a>; <span class="comment">// global variable 0 (less) to 4 (more verbose)</span>
00049 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="namespacecatalog_access.html#a28">printErr</a>(<span class="keyword">const</span> std::string origin, <span class="keyword">const</span> std::string text);
00050 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="namespacecatalog_access.html#a29">printWarn</a>(<span class="keyword">const</span> std::string origin, <span class="keyword">const</span> std::string text);
00051 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="namespacecatalog_access.html#a30">printLog</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> level, <span class="keyword">const</span> std::string text);
00052 
<a name="l00063"></a><a class="code" href="classcatalog_access_1_1_quantity.html">00063</a> <span class="keyword">class </span><a class="code" href="classcatalog_access_1_1_quantity.html">Quantity</a> {
00064 
00065 <span class="keyword">public</span>:
00066 
<a name="l00067"></a><a class="code" href="classcatalog_access_1_1_quantity.html#s3">00067</a>   <span class="keyword">typedef</span> <span class="keyword">enum</span> {<a class="code" href="classcatalog_access_1_1_quantity.html#s3s0">NUM</a>=1, <a class="code" href="classcatalog_access_1_1_quantity.html#s3s1">STRING</a>=2, <a class="code" href="classcatalog_access_1_1_quantity.html#s3s2">VECTOR</a>=0} <a class="code" href="classcatalog_access_1_1_quantity.html#s3">QuantityType</a>;
00068 
<a name="l00069"></a><a class="code" href="classcatalog_access_1_1_quantity.html#a0">00069</a>   <a class="code" href="classcatalog_access_1_1_quantity.html#a0">Quantity</a>() {                  <span class="comment">// Default constructor</span>
00070  
00071     <a class="code" href="classcatalog_access_1_1_quantity.html#m5">m_type</a> =<a class="code" href="classcatalog_access_1_1_quantity.html#s3s2">VECTOR</a>;
00072     <a class="code" href="classcatalog_access_1_1_quantity.html#m7">m_index</a>=-1;
00073     <a class="code" href="classcatalog_access_1_1_quantity.html#m8">m_isGeneric</a>   =<span class="keyword">false</span>;
00074     <a class="code" href="classcatalog_access_1_1_quantity.html#m13">m_lowerCut</a>=<a class="code" href="quantity_8h.html#a0">NO_SEL_CUT</a>; <a class="code" href="classcatalog_access_1_1_quantity.html#m14">m_upperCut</a>=<a class="code" href="quantity_8h.html#a0">NO_SEL_CUT</a>;
00075     <a class="code" href="classcatalog_access_1_1_quantity.html#m17">m_precision</a>   =10*Min_Prec;
00076     <a class="code" href="classcatalog_access_1_1_quantity.html#m18">m_rejectNaN</a>   =<span class="keyword">true</span>;
00077     <a class="code" href="classcatalog_access_1_1_quantity.html#m19">m_cutORed</a>     =<span class="keyword">false</span>;
00078     <a class="code" href="classcatalog_access_1_1_quantity.html#m16">m_excludeList</a> =<span class="keyword">false</span>;
00079   }
<a name="l00080"></a><a class="code" href="classcatalog_access_1_1_quantity.html#a1">00080</a>   <a class="code" href="classcatalog_access_1_1_quantity.html#a0">Quantity</a>(std::string name, std::string comm, std::string ucd,
00081            <a class="code" href="classcatalog_access_1_1_quantity.html#s3">QuantityType</a> type, std::string unit, <span class="keywordtype">int</span> index=-1,
00082            <span class="keywordtype">bool</span> gene=<span class="keyword">false</span>, <span class="keywordtype">double</span> low=<a class="code" href="quantity_8h.html#a0">NO_SEL_CUT</a>, <span class="keywordtype">double</span> up=<a class="code" href="quantity_8h.html#a0">NO_SEL_CUT</a>) :
00083     <a class="code" href="classcatalog_access_1_1_quantity.html#m0">m_name</a>(name), <a class="code" href="classcatalog_access_1_1_quantity.html#m1">m_comment</a>(comm), <a class="code" href="classcatalog_access_1_1_quantity.html#m2">m_ucd</a>(ucd), <a class="code" href="classcatalog_access_1_1_quantity.html#m5">m_type</a>(type), <a class="code" href="classcatalog_access_1_1_quantity.html#m6">m_unit</a>(unit),
00084     <a class="code" href="classcatalog_access_1_1_quantity.html#m7">m_index</a>(index), <a class="code" href="classcatalog_access_1_1_quantity.html#m8">m_isGeneric</a>(gene), <a class="code" href="classcatalog_access_1_1_quantity.html#m13">m_lowerCut</a>(low), <a class="code" href="classcatalog_access_1_1_quantity.html#m14">m_upperCut</a>(up) {}
00085                                 <span class="comment">// Constructor with arguments</span>
00086   <a class="code" href="classcatalog_access_1_1_quantity.html#a2">~Quantity</a>();                  <span class="comment">// Destructor needed to free memory</span>
00087   <a class="code" href="classcatalog_access_1_1_quantity.html#a0">Quantity</a>(<span class="keyword">const</span> <a class="code" href="classcatalog_access_1_1_quantity.html#a0">Quantity</a> &amp; );  <span class="comment">// Copy constructor needed</span>
00088 
00089 <span class="comment">/**********************************************************************/</span>
<a name="l00090"></a><a class="code" href="classcatalog_access_1_1_quantity.html#m0">00090</a>   std::string <a class="code" href="classcatalog_access_1_1_quantity.html#m0">m_name</a>;           <span class="comment">// The name of the quantity, e.g., "hr1"</span>
<a name="l00091"></a><a class="code" href="classcatalog_access_1_1_quantity.html#m1">00091</a>   std::string <a class="code" href="classcatalog_access_1_1_quantity.html#m1">m_comment</a>;        <span class="comment">// e.g. " hardness ratio 1-3keV/3-6keV"</span>
<a name="l00092"></a><a class="code" href="classcatalog_access_1_1_quantity.html#m2">00092</a>   std::string <a class="code" href="classcatalog_access_1_1_quantity.html#m2">m_ucd</a>;
00093       <span class="comment">// Unified contents descriptor (if available, "" otherwise)</span>
00094       <span class="comment">// follows either UCD1 standard or UCD1+ (still t.b.d.)</span>
<a name="l00095"></a><a class="code" href="classcatalog_access_1_1_quantity.html#m3">00095</a>   std::string  <a class="code" href="classcatalog_access_1_1_quantity.html#m3">m_format</a>;        <span class="comment">// format used in CDS database or BINTABLE</span>
<a name="l00096"></a><a class="code" href="classcatalog_access_1_1_quantity.html#m4">00096</a>   std::string  <a class="code" href="classcatalog_access_1_1_quantity.html#m4">m_null</a>;          <span class="comment">// TNULL keyword in BINTABLE </span>
<a name="l00097"></a><a class="code" href="classcatalog_access_1_1_quantity.html#m5">00097</a>   <a class="code" href="classcatalog_access_1_1_quantity.html#s3">QuantityType</a> <a class="code" href="classcatalog_access_1_1_quantity.html#m5">m_type</a>;
<a name="l00098"></a><a class="code" href="classcatalog_access_1_1_quantity.html#m6">00098</a>   std::string  <a class="code" href="classcatalog_access_1_1_quantity.html#m6">m_unit</a>;
00099       <span class="comment">// The unit description, "1" if dimensionless, "" if string</span>
<a name="l00100"></a><a class="code" href="classcatalog_access_1_1_quantity.html#m7">00100</a>   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_quantity.html#m7">m_index</a>;
00101       <span class="comment">// Where to find the quantity in the m_strings or m_numericals</span>
00102       <span class="comment">// catalog members array</span>
<a name="l00103"></a><a class="code" href="classcatalog_access_1_1_quantity.html#m8">00103</a>   <span class="keywordtype">bool</span> <a class="code" href="classcatalog_access_1_1_quantity.html#m8">m_isGeneric</a>;
00104       <span class="comment">// True if the quantity is part of the set of quantities</span>
00105       <span class="comment">// common to all catalogs</span>
<a name="l00106"></a><a class="code" href="classcatalog_access_1_1_quantity.html#m9">00106</a>   std::string <a class="code" href="classcatalog_access_1_1_quantity.html#m9">m_statError</a>;
00107       <span class="comment">// For numerical quantities: the name of the quantity which contains</span>
00108       <span class="comment">// the statistical error of this quantity;</span>
00109       <span class="comment">// empty if unavailable or for strings</span>
<a name="l00110"></a><a class="code" href="classcatalog_access_1_1_quantity.html#m10">00110</a>   std::string <a class="code" href="classcatalog_access_1_1_quantity.html#m10">m_sysError</a>;
00111       <span class="comment">// For numerical quantities: the name of the quantity which contains</span>
00112       <span class="comment">// the systematic error of this quantity;</span>
00113       <span class="comment">// empty if unavailable or for strings</span>
<a name="l00114"></a><a class="code" href="classcatalog_access_1_1_quantity.html#m11">00114</a>   std::vector&lt;std::string&gt; <a class="code" href="classcatalog_access_1_1_quantity.html#m11">m_vectorQs</a>;
00115       <span class="comment">// If type == VECTOR, this vector of strings contains the ordered list</span>
00116       <span class="comment">// of quantity names which constitute the vector elements.</span>
00117       <span class="comment">// All vector elements have to be numerical quantities.</span>
00118       <span class="comment">// If type!=VECTOR, vectorQs is empty.</span>
00119 
00120 
00121   <span class="comment">// selection criteria</span>
00122   <span class="comment">//-------------------</span>
00123 
<a name="l00124"></a><a class="code" href="classcatalog_access_1_1_quantity.html#m12">00124</a>   std::vector&lt;std::string&gt; <a class="code" href="classcatalog_access_1_1_quantity.html#m12">m_listValS</a>;
00125       <span class="comment">// for numerical: undefined; default: empty</span>
00126       <span class="comment">// for string   : stores the list of values to be tested</span>
<a name="l00127"></a><a class="code" href="classcatalog_access_1_1_quantity.html#m13">00127</a>   <span class="keywordtype">double</span> <a class="code" href="classcatalog_access_1_1_quantity.html#m13">m_lowerCut</a>;  
00128       <span class="comment">// for string   : undefined; default == NO_SEL_CUT</span>
00129       <span class="comment">// for numerical: stores the minimum value neccessary for row inclusion</span>
<a name="l00130"></a><a class="code" href="classcatalog_access_1_1_quantity.html#m14">00130</a>   <span class="keywordtype">double</span> <a class="code" href="classcatalog_access_1_1_quantity.html#m14">m_upperCut</a>;
00131       <span class="comment">// for string   : undefined; default == NO_SEL_CUT</span>
00132       <span class="comment">// for numerical: stores the maximum value necessary for row inclusion</span>
<a name="l00133"></a><a class="code" href="classcatalog_access_1_1_quantity.html#m15">00133</a>   std::vector&lt;double&gt; <a class="code" href="classcatalog_access_1_1_quantity.html#m15">m_listValN</a>;
00134      <span class="comment">// for string   : undefined; default: empty</span>
00135      <span class="comment">// for numerical: stores the list of values to be tested</span>
00136 
<a name="l00137"></a><a class="code" href="classcatalog_access_1_1_quantity.html#m16">00137</a>   <span class="keywordtype">bool</span>   <a class="code" href="classcatalog_access_1_1_quantity.html#m16">m_excludeList</a>;<span class="comment">// if false the values in the list lead to row inclusion</span>
<a name="l00138"></a><a class="code" href="classcatalog_access_1_1_quantity.html#m17">00138</a>   <span class="keywordtype">double</span> <a class="code" href="classcatalog_access_1_1_quantity.html#m17">m_precision</a>;  <span class="comment">// test for equality used for m_excludedN, listValN</span>
<a name="l00139"></a><a class="code" href="classcatalog_access_1_1_quantity.html#m18">00139</a>   <span class="keywordtype">bool</span>   <a class="code" href="classcatalog_access_1_1_quantity.html#m18">m_rejectNaN</a>;  <span class="comment">// if true the NaN values are not selected</span>
<a name="l00140"></a><a class="code" href="classcatalog_access_1_1_quantity.html#m19">00140</a>   <span class="keywordtype">bool</span>   <a class="code" href="classcatalog_access_1_1_quantity.html#m19">m_cutORed</a>;
00141       <span class="comment">// set false by useOnlyN (default): numerical cut AND list</span>
00142       <span class="comment">// set true by includeN: numerical cut OR list</span>
00143 
00144 }; <span class="comment">// end class definition </span>
00145 
00146 
00147 <span class="comment">/**********************************************************************/</span>
00148 <span class="comment">/*  DEFINING inline FUNCTION MEMBERS                                  */</span>
00149 <span class="comment">/**********************************************************************/</span>
00150 
00151 <span class="comment">// Destructor needed to free memory</span>
<a name="l00152"></a><a class="code" href="classcatalog_access_1_1_quantity.html#a2">00152</a> <span class="keyword">inline</span> Quantity::~Quantity() {
00153 
00154 <span class="preprocessor">  #ifdef DEBUG_CAT</span>
00155 <span class="preprocessor"></span>  std::cout &lt;&lt; <span class="stringliteral">"!! DEBUG Quantity destructor on: "</span>
00156             &lt;&lt; <a class="code" href="classcatalog_access_1_1_quantity.html#m0">m_name</a> &lt;&lt;<span class="stringliteral">" (ucd="</span>&lt;&lt; <a class="code" href="classcatalog_access_1_1_quantity.html#m2">m_ucd</a> &lt;&lt;<span class="stringliteral">")"</span>&lt;&lt; std::endl;
00157 <span class="preprocessor">  #endif</span>
00158 <span class="preprocessor"></span>  <a class="code" href="classcatalog_access_1_1_quantity.html#m11">m_vectorQs</a>.clear();
00159   <a class="code" href="classcatalog_access_1_1_quantity.html#m12">m_listValS</a>.clear();
00160   <a class="code" href="classcatalog_access_1_1_quantity.html#m15">m_listValN</a>.clear();
00161 }
00162 
00163 } <span class="comment">// namespace catalogAccess</span>
00164 <span class="preprocessor">#endif // catalogAccess_quant_h</span>
</pre></div><hr><address style="align: right;"><small>Generated on Tue Jun 28 10:46:03 2005 for catalogAccess by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.18 </small></address>
</body>
</html>
