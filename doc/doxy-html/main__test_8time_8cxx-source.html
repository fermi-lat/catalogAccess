<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>main_test.time.cxx Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.18 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>main_test.time.cxx</h1><a href="main__test_8time_8cxx.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 
00008 <span class="preprocessor">#include "<a class="code" href="catalog_8h.html">catalog.h</a>"</span>
00009 <span class="preprocessor">#include &lt;iomanip&gt;</span>
00010 <span class="preprocessor">#include &lt;time.h&gt;</span>
00011 
00012 <span class="keywordtype">void</span> <a class="code" href="main__test_8cxx.html#a2">help</a>();
00013 <span class="keywordtype">void</span> <a class="code" href="main__test_8time_8cxx.html#a2">show_quant</a>(<span class="keyword">const</span> <a class="code" href="classcatalog_access_1_1_quantity.html">catalogAccess::Quantity</a> &amp;);
00014 <span class="keywordtype">void</span> <a class="code" href="main__test_8time_8cxx.html#a3">show_string</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> std::string val);
00015 <span class="keywordtype">void</span> <a class="code" href="main__test_8time_8cxx.html#a4">show_double</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> <span class="keywordtype">double</span> val);
00016 
00017 <span class="keyword">static</span> <span class="keyword">const</span> std::_Ios_Fmtflags outDouble=std::ios::right|std::ios::scientific;
00018 
<a name="l00019"></a><a class="code" href="main__test_8time_8cxx.html#a5">00019</a> <span class="keywordtype">int</span> <a class="code" href="main__test_8time_8cxx.html#a5">main</a>(<span class="keywordtype">int</span> iargc, <span class="keywordtype">char</span> * argv[]) {
00020 
00021 <span class="comment">// Show number of main argument</span>
00022   std::cout &lt;&lt; std::setw(70) &lt;&lt; std::setfill(<span class="charliteral">'*'</span>) &lt;&lt; <span class="stringliteral">"\n"</span>
00023             &lt;&lt; iargc-1 &lt;&lt; <span class="stringliteral">" given argument(s)"</span> &lt;&lt; std::endl;
00024 
00025 <span class="comment">// Parse the command line arguments.</span>
00026   <span class="keywordtype">double</span> axisDeg;
00027   <span class="keywordtype">bool</span>   testDUR = <span class="keyword">false</span>;
00028   std::string argString, strVal;
00029   <span class="keywordtype">int</span> i;
00030   <span class="keywordflow">if</span> (iargc &gt; 1) {
00031     axisDeg=std::atof(argv[1]); <span class="comment">//static_cast&lt;int&gt;()</span>
00032     argString=<span class="stringliteral">"Argument #1: "</span>;
00033   }
00034   <span class="keywordflow">else</span> {
00035     axisDeg=5.0;
00036     argString=<span class="stringliteral">"Argument #1 (default): "</span>;
00037   }
00038   std::cout &lt;&lt; argString &lt;&lt; std::setw(10) &lt;&lt; std::setfill(<span class="charliteral">' '</span>)
00039             &lt;&lt; std::setiosflags(outDouble | std::ios::showpoint)
00040             &lt;&lt; std::setprecision(4) &lt;&lt; axisDeg
00041             &lt;&lt; std::resetiosflags(outDouble) &lt;&lt; std::endl;
00042 
00043   argString=<span class="stringliteral">"ZprogUCD/1rxs.out"</span>;
00044   <span class="keywordflow">if</span> (iargc &gt; 2) {
00045 
00046     <span class="comment">// All subsequent arguments are either option flags or filenames</span>
00047     <span class="keywordflow">for</span> (i=2; i &lt; iargc; i++) {
00048       strVal=argv[i]; <span class="comment">/* convert C string to C++ string */</span>
00049       <span class="keywordflow">if</span> (strVal == <span class="stringliteral">"-help"</span>) {
00050         <a class="code" href="main__test_8cxx.html#a2">help</a>();
00051         <span class="keywordflow">return</span> 0;
00052       }
00053       <span class="keywordflow">if</span> (strVal == <span class="stringliteral">"-d"</span>) testDUR=<span class="keyword">true</span>;
00054       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strVal[0] != <span class="charliteral">'-'</span>) argString=strVal;
00055       std::cout &lt;&lt; <span class="stringliteral">"Argument #"</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">": "</span> &lt;&lt; strVal &lt;&lt; std::endl;    
00056     } <span class="comment">//loop on arguments</span>
00057 
00058   }
00059   <span class="keywordflow">else</span> std::cout &lt;&lt; <span class="stringliteral">"Argument #2 (default): "</span> &lt;&lt; argString &lt;&lt; std::endl;
00060 
00061   <span class="keywordtype">long</span> numRows;
00062   <span class="keywordtype">int</span>  vecSize, err=catalogAccess::IS_OK;
00063   std::vector&lt;std::string&gt; catNames, listStr;
00064   std::vector&lt;double&gt; listVal;
00065   <span class="keywordtype">double</span>  rVal, sec, minErr=0.0;
00066   time_t  today, time1, time2;
00067   <span class="keywordtype">char</span>    when[31];
00068   <span class="keywordtype">bool</span>    galGen=<span class="keyword">false</span>;
00069   std::vector&lt;catalogAccess::Quantity&gt; allQ;
00070 
00071   today=time(&amp;today);
00072   strftime(when, 30, <span class="stringliteral">"%H:%M:%S (TU) %d-%b-%Y"</span>, gmtime(&amp;today));
00073   printf(<span class="stringliteral">"\n%s\n"</span>, when);
00074 
00075   <a class="code" href="classcatalog_access_1_1_catalog.html">catalogAccess::Catalog</a> *myCat = <span class="keyword">new</span> <a class="code" href="classcatalog_access_1_1_catalog.html">catalogAccess::Catalog</a>();
00076 <span class="comment">/*  numRows=myCat-&gt;getRAMsize(0);</span>
00077 <span class="comment">  std::cout &lt;&lt; "\n* getRAMsize with 'myCat' (new catalog pointer) = "</span>
00078 <span class="comment">            &lt;&lt; numRows &lt;&lt; std::endl;*/</span>
00079   myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a21">getNumRows</a>(&amp;numRows);
00080   std::cout &lt;&lt; <span class="stringliteral">"\n* Number of rows in 'myCat' (new catalog pointer) = "</span>
00081             &lt;&lt; numRows &lt;&lt; std::endl;
00082 
00083   <span class="comment">// two ways to use static members</span>
00084   <a class="code" href="classcatalog_access_1_1_catalog.html#d0">catalogAccess::Catalog::getCatList</a>(&amp;catNames);
00085   myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#d0">getCatList</a>(&amp;listStr, <span class="keyword">false</span>);
00086   std::cout &lt;&lt; <span class="stringliteral">"\n* Available catalogs (with their web query name):"</span>
00087             &lt;&lt; std::endl;
00088   vecSize=catNames.size();
00089   <span class="keywordflow">for</span> (i=0; i&lt;vecSize; i++) {
00090     std::cout &lt;&lt; std::setw(20) &lt;&lt; std::setfill(<span class="charliteral">' '</span>)
00091               &lt;&lt; std::setiosflags(std::ios::left) &lt;&lt; catNames[i]
00092               &lt;&lt; <span class="stringliteral">" ("</span> &lt;&lt; listStr[i] &lt;&lt; <span class="stringliteral">")"</span> &lt;&lt; std::endl;
00093   }
00094 
00095   <span class="keyword">const</span> std::string myPath=<span class="stringliteral">"/local/home/aymsauv/ZprogU9/catalogAccess_v0/Zdata/"</span>;
00096   <span class="comment">//const std::string myPath="/home/integraldata/sauvageon/";</span>
00097   strVal=myPath+argString;
00098 <span class="comment">//  err=myCat-&gt;importDescription(strVal);</span>
00099 <span class="comment">/*  if (err &gt; 0) err=myCat-&gt;getMaxNumRows(&amp;numRows, strVal);</span>
00100 <span class="comment">  std::cout &lt;&lt; "* Value returned = " &lt;&lt; err &lt;&lt;" ("&lt;&lt; numRows &lt;&lt;" rows)" &lt;&lt; std::endl;</span>
00101 <span class="comment">  return 0;</span>
00102 <span class="comment">*/</span>
00103   std::cout &lt;&lt; <span class="stringliteral">"\n* Calling: import on file \""</span> &lt;&lt; argString
00104              &lt;&lt; <span class="stringliteral">"\""</span>&lt;&lt; std::endl;
00105   time1=time(&amp;time1);
00106   err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a8">import</a>(strVal); <span class="comment">//48921 or 88621</span>
00107   time2=time(&amp;time2);
00108   rVal=difftime(time2, time1);
00109   std::cout &lt;&lt; <span class="stringliteral">"* Value returned = "</span> &lt;&lt; err &lt;&lt; <span class="stringliteral">" (after "</span>
00110             &lt;&lt; rVal &lt;&lt; <span class="stringliteral">" seconds)"</span> &lt;&lt; std::endl;
00111 
00112   catNames.assign(6, <span class="stringliteral">""</span>);
00113   myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a12">getCatalogTitles</a>(&amp;catNames);
00114   std::cout &lt;&lt; <span class="stringliteral">"\n* 'myCat' info (size "</span> &lt;&lt;catNames.size() &lt;&lt; <span class="stringliteral">"):"</span>
00115             &lt;&lt; <span class="stringliteral">"\ncode=\""</span> &lt;&lt; catNames[0] &lt;&lt; <span class="stringliteral">"\""</span>
00116             &lt;&lt; <span class="stringliteral">"\nURL=\""</span> &lt;&lt;  catNames[1] &lt;&lt; <span class="stringliteral">"\""</span>
00117             &lt;&lt; <span class="stringliteral">"\ncatalog=\""</span> &lt;&lt;  catNames[2] &lt;&lt; <span class="stringliteral">"\""</span> 
00118             &lt;&lt; <span class="stringliteral">" ["</span> &lt;&lt;  catNames[3] &lt;&lt; <span class="stringliteral">"]"</span> 
00119             &lt;&lt; <span class="stringliteral">"\ntable  =\""</span> &lt;&lt;  catNames[4] &lt;&lt; <span class="stringliteral">"\""</span> 
00120             &lt;&lt; <span class="stringliteral">" ["</span> &lt;&lt;  catNames[5] &lt;&lt; <span class="stringliteral">"]\n"</span> 
00121             &lt;&lt; std::endl;
00122   <span class="keywordflow">if</span> (err &lt; 0) <span class="keywordflow">return</span> 0;
00123 
00124   catNames[0]=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a45">getNameObjName</a>();
00125   catNames[1]=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a40">getNameRA</a>();
00126   catNames[2]=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a41">getNameDEC</a>();
00127   catNames[3]=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a42">getNamePosErr</a>();
00128   catNames[4]=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a43">getNameL</a>();
00129   catNames[5]=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a44">getNameB</a>();
00130   <span class="keywordflow">if</span> ((catNames[4]!=<span class="stringliteral">""</span>) &amp;&amp; (catNames[5]!=<span class="stringliteral">""</span>)) galGen=<span class="keyword">true</span>;
00131   
00132   vecSize=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a13">getQuantityDescription</a>(&amp;allQ);
00133   myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a21">getNumRows</a>(&amp;numRows);
00134   <span class="keywordflow">for</span> (i=0; i&lt;vecSize; i++) <a class="code" href="main__test_8time_8cxx.html#a2">show_quant</a>(allQ[i]);
00135   std::cout &lt;&lt; <span class="stringliteral">"\n* Number of quantities &amp; rows = "</span>
00136             &lt;&lt; vecSize &lt;&lt; <span class="stringliteral">" &amp; "</span> &lt;&lt; numRows &lt;&lt; std::endl;
00137 <span class="comment">//  std::cout &lt;&lt; "\n* getRAMsize = " &lt;&lt; myCat-&gt;getRAMsize() &lt;&lt; std::endl;</span>
00138 <span class="comment">//return 0;</span>
00139   
00140   std::cout &lt;&lt; <span class="stringliteral">"\n* Calling: setSelEllipse, with first main argument"</span>
00141             &lt;&lt; <span class="stringliteral">" as circle axis:"</span> &lt;&lt; std::endl;
00142   time1=time(&amp;time1);
00143   <span class="keywordflow">if</span> (testDUR) {
00144     err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a51">setSelEllipse</a>(0, -90, axisDeg, axisDeg);
00145   }
00146   <span class="keywordflow">else</span> {
00147                                           <span class="comment">//   180   88</span>
00148     <span class="keywordflow">if</span> (axisDeg &lt;= 1) err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a51">setSelEllipse</a>(150, -85., axisDeg, axisDeg);
00149     <span class="keywordflow">else</span> err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a51">setSelEllipse</a>(5, 0., axisDeg, axisDeg);
00150   }
00151   time2=time(&amp;time2);
00152   sec=difftime(time2, time1);
00153   myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a29">getNumSelRows</a>(&amp;numRows);
00154   std::cout &lt;&lt; <span class="stringliteral">"* Number of SELECTED rows = "</span> &lt;&lt; numRows &lt;&lt; <span class="stringliteral">" (after "</span>
00155             &lt;&lt; sec &lt;&lt; <span class="stringliteral">" seconds)"</span> &lt;&lt; std::endl;
00156 
00157   err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a35">minSelVal</a>(catNames[1], &amp;rVal);
00158   <span class="keywordflow">if</span> (err &gt; 0) <a class="code" href="main__test_8time_8cxx.html#a4">show_double</a>(<span class="stringliteral">"RA min"</span>, rVal);
00159   err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a36">maxSelVal</a>(catNames[1], &amp;rVal);
00160   <span class="keywordflow">if</span> (err &gt; 0) <a class="code" href="main__test_8time_8cxx.html#a4">show_double</a>(<span class="stringliteral">"RA max"</span>, rVal);
00161   err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a35">minSelVal</a>(catNames[2], &amp;rVal);
00162   <span class="keywordflow">if</span> (err &gt; 0) <a class="code" href="main__test_8time_8cxx.html#a4">show_double</a>(<span class="stringliteral">"DEC min"</span>, rVal);
00163   err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a36">maxSelVal</a>(catNames[2], &amp;rVal);
00164   <span class="keywordflow">if</span> (err &gt; 0) <a class="code" href="main__test_8time_8cxx.html#a4">show_double</a>(<span class="stringliteral">"DEC max"</span>, rVal);
00165   <span class="keywordflow">if</span> (catNames[3] != <span class="stringliteral">""</span>) {
00166     err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a35">minSelVal</a>(catNames[3], &amp;rVal);
00167     <span class="keywordflow">if</span> (err &gt; 0) {
00168      <a class="code" href="main__test_8time_8cxx.html#a4">show_double</a>(<span class="stringliteral">"PosErr min"</span>, rVal);
00169      minErr=rVal;
00170     }
00171     err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a36">maxSelVal</a>(catNames[3], &amp;rVal);
00172     <span class="keywordflow">if</span> (err &gt; 0) <a class="code" href="main__test_8time_8cxx.html#a4">show_double</a>(<span class="stringliteral">"PosErr max"</span>, rVal);
00173   }
00174   vecSize=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a34">getSelSValues</a>(<span class="stringliteral">"NewFlag"</span>, &amp;listStr);
00175   std::cout &lt;&lt; <span class="stringliteral">"* Value returned = "</span> &lt;&lt; vecSize &lt;&lt; <span class="stringliteral">", equal to size of vector ("</span>
00176             &lt;&lt; <span class="stringliteral">"NewFlag) containing: "</span>;
00177   <span class="keywordflow">for</span> (i=0; i&lt;vecSize; i++) std::cout &lt;&lt;<span class="stringliteral">"\""</span>&lt;&lt; listStr[i] &lt;&lt;<span class="stringliteral">"\"  "</span>;
00178   std::cout &lt;&lt; <span class="stringliteral">"\n"</span> &lt;&lt; std::endl;
00179 
00180   err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a22">getSValue</a>(catNames[0], -1, &amp;strVal);
00181   err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a22">getSValue</a>(catNames[0],  0, &amp;strVal);
00182   <span class="keywordflow">if</span> (err &gt; 0) <a class="code" href="main__test_8time_8cxx.html#a3">show_string</a>(<span class="stringliteral">"generic Name"</span>, strVal);
00183   err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a37">ra_deg</a>(0, &amp;rVal);
00184   <span class="keywordflow">if</span> (err &gt; 0) <a class="code" href="main__test_8time_8cxx.html#a4">show_double</a>(<span class="stringliteral">"RA "</span>, rVal);
00185   err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a38">dec_deg</a>(0, &amp;rVal);
00186   <span class="keywordflow">if</span> (err &gt; 0) <a class="code" href="main__test_8time_8cxx.html#a4">show_double</a>(<span class="stringliteral">"DEC"</span>, rVal);
00187   err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a39">posError_deg</a>(0, &amp;rVal);
00188   <span class="keywordflow">if</span> (err &gt; 0) <a class="code" href="main__test_8time_8cxx.html#a4">show_double</a>(<span class="stringliteral">"pos.Err"</span>, rVal);
00189   <span class="keywordflow">if</span> (galGen) {
00190     err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a23">getNValue</a>(catNames[4], 0, &amp;rVal);
00191     <span class="keywordflow">if</span> (err &gt; 0) <a class="code" href="main__test_8time_8cxx.html#a4">show_double</a>(<span class="stringliteral">"GLON"</span>, rVal);
00192     err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a23">getNValue</a>(catNames[5], 0, &amp;rVal);
00193     <span class="keywordflow">if</span> (err &gt; 0) <a class="code" href="main__test_8time_8cxx.html#a4">show_double</a>(<span class="stringliteral">"GLAT"</span>, rVal);
00194   }
00195   err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a30">getSelSValue</a>(catNames[0], 51, &amp;strVal);
00196   <span class="keywordflow">if</span> (err &gt; 0) <a class="code" href="main__test_8time_8cxx.html#a3">show_string</a>(<span class="stringliteral">"generic name[51]"</span>, strVal);
00197   err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a30">getSelSValue</a>(catNames[0], 0, &amp;strVal);
00198   <span class="keywordflow">if</span> (err &gt; 0) <a class="code" href="main__test_8time_8cxx.html#a3">show_string</a>(<span class="stringliteral">"generic name[0] "</span>, strVal);
00199   err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a37">ra_deg</a>(0, &amp;rVal, <span class="keyword">true</span>);
00200   <span class="keywordflow">if</span> (err &gt; 0) <a class="code" href="main__test_8time_8cxx.html#a4">show_double</a>(<span class="stringliteral">"RA"</span>, rVal);
00201   err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a38">dec_deg</a>(0, &amp;rVal, <span class="keyword">true</span>);
00202   <span class="keywordflow">if</span> (err &gt; 0) <a class="code" href="main__test_8time_8cxx.html#a4">show_double</a>(<span class="stringliteral">"DEC"</span>, rVal);
00203   err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a39">posError_deg</a>(0, &amp;rVal, <span class="keyword">true</span>);
00204   <span class="keywordflow">if</span> (err &gt; 0) <a class="code" href="main__test_8time_8cxx.html#a4">show_double</a>(<span class="stringliteral">"pos.Err"</span>, rVal);
00205   <span class="keywordflow">if</span> (galGen) {
00206     err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a31">getSelNValue</a>(catNames[4], 0, &amp;rVal);
00207     <span class="keywordflow">if</span> (err &gt; 0) <a class="code" href="main__test_8time_8cxx.html#a4">show_double</a>(<span class="stringliteral">"GLON"</span>, rVal);
00208     err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a31">getSelNValue</a>(catNames[5], 0, &amp;rVal);
00209     <span class="keywordflow">if</span> (err &gt; 0) <a class="code" href="main__test_8time_8cxx.html#a4">show_double</a>(<span class="stringliteral">"GLAT"</span>, rVal);
00210   }
00211   listStr.assign(1, strVal);
00212   myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a56">useOnlyS</a>(catNames[0], listStr, <span class="keyword">true</span>);
00213   myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a29">getNumSelRows</a>(&amp;numRows);
00214   std::cout &lt;&lt; <span class="stringliteral">"* Number of SELECTED rows = "</span> &lt;&lt; numRows &lt;&lt; std::endl;
00215   myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a55">excludeS</a>(catNames[0], listStr);
00216   myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a29">getNumSelRows</a>(&amp;numRows);
00217   std::cout &lt;&lt; <span class="stringliteral">"* Number of SELECTED rows = "</span> &lt;&lt; numRows &lt;&lt; std::endl;
00218   myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a48">unsetCuts</a>(catNames[0]);
00219   myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a29">getNumSelRows</a>(&amp;numRows);
00220   std::cout &lt;&lt; <span class="stringliteral">"* Number of SELECTED rows = "</span> &lt;&lt; numRows &lt;&lt; std::endl;
00221 <span class="comment">//return 0;</span>
00222 
00223   <span class="keywordflow">if</span> (testDUR) {
00224     std::cout &lt;&lt; <span class="stringliteral">"\n* Calling: eraseNonSelected()"</span> &lt;&lt; std::endl;
00225     time1=time(&amp;time1);
00226     err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a64">eraseNonSelected</a>();
00227     myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a29">getNumSelRows</a>(&amp;numRows);
00228     time2=time(&amp;time2);
00229     sec=difftime(time2, time1);
00230     std::cout &lt;&lt; <span class="stringliteral">"* Number of SELECTED rows = "</span> &lt;&lt; numRows &lt;&lt; <span class="stringliteral">" (after "</span>
00231               &lt;&lt; sec &lt;&lt; <span class="stringliteral">" seconds)"</span> &lt;&lt; std::endl;
00232 
00233     strVal=myPath+argString+<span class="stringliteral">".txt"</span>;
00234     std::cout &lt;&lt; <span class="stringliteral">"\n* Calling: save("</span> &lt;&lt; strVal &lt;&lt; <span class="stringliteral">")"</span> &lt;&lt; std::endl;
00235     time1=time(&amp;time1);
00236     err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a11">save</a>(strVal, <span class="keyword">false</span>);
00237     time2=time(&amp;time2);
00238     sec=difftime(time2, time1);
00239     std::cout &lt;&lt; <span class="stringliteral">"* Value returned = "</span> &lt;&lt; err &lt;&lt; <span class="stringliteral">" (after "</span>
00240               &lt;&lt; sec &lt;&lt; <span class="stringliteral">" seconds)"</span> &lt;&lt; std::endl;
00241     <span class="keywordflow">goto</span> fin;
00242   }
00243   <span class="keywordflow">if</span> (minErr &gt; 0.0) {
00244     std::cout &lt;&lt; <span class="stringliteral">"\n* Calling: setUpperCut"</span> &lt;&lt; std::endl;
00245     myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a54">setUpperCut</a>(catNames[3], minErr+2.0);
00246     myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a29">getNumSelRows</a>(&amp;numRows);
00247     std::cout &lt;&lt; <span class="stringliteral">"* Number of SELECTED rows = "</span> &lt;&lt; numRows &lt;&lt; std::endl;
00248     err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a35">minSelVal</a>(catNames[1], &amp;rVal);
00249     <span class="keywordflow">if</span> (err &gt; 0) <a class="code" href="main__test_8time_8cxx.html#a4">show_double</a>(<span class="stringliteral">"RA min"</span>, rVal);
00250     err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a36">maxSelVal</a>(catNames[1], &amp;rVal);
00251     <span class="keywordflow">if</span> (err &gt; 0) <a class="code" href="main__test_8time_8cxx.html#a4">show_double</a>(<span class="stringliteral">"RA max"</span>, rVal);
00252     vecSize=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a34">getSelSValues</a>(<span class="stringliteral">"NewFlag"</span>, &amp;listStr);
00253     std::cout &lt;&lt; <span class="stringliteral">"* Value returned = "</span> &lt;&lt; vecSize &lt;&lt; <span class="stringliteral">", equal to size of vector ("</span>
00254               &lt;&lt; <span class="stringliteral">"NewFlag) containing: "</span>;
00255     <span class="keywordflow">for</span> (i=0; i&lt;vecSize; i++) std::cout &lt;&lt;<span class="stringliteral">"\""</span>&lt;&lt; listStr[i] &lt;&lt;<span class="stringliteral">"\"  "</span>;
00256     std::cout &lt;&lt; std::endl;
00257   }
00258 
00259   std::cout &lt;&lt; <span class="stringliteral">"\n* Calling: setLowerCut"</span> &lt;&lt; std::endl;
00260   myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a53">setLowerCut</a>(catNames[1], 2); <span class="comment">//setUpperCut(catNames[1], 9);</span>
00261   myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a29">getNumSelRows</a>(&amp;numRows);
00262   std::cout &lt;&lt; <span class="stringliteral">"* Number of SELECTED rows = "</span> &lt;&lt; numRows &lt;&lt; std::endl;
00263   err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a35">minSelVal</a>(catNames[1], &amp;rVal);
00264   <span class="keywordflow">if</span> (err &gt; 0) <a class="code" href="main__test_8time_8cxx.html#a4">show_double</a>(<span class="stringliteral">"RA min"</span>, rVal);
00265   err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a36">maxSelVal</a>(catNames[1], &amp;rVal);
00266   <span class="keywordflow">if</span> (err &gt; 0) <a class="code" href="main__test_8time_8cxx.html#a4">show_double</a>(<span class="stringliteral">"RA max"</span>, rVal);
00267 
00268   std::cout &lt;&lt; <span class="stringliteral">"\n* Calling: useOnlyS with empty vector"</span> &lt;&lt; std::endl;
00269   listStr.clear();
00270   err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a56">useOnlyS</a>(<span class="stringliteral">"NewFlag"</span>, listStr);
00271 
00272   std::cout &lt;&lt; <span class="stringliteral">"\n* Calling: unsetSelEllipse"</span> &lt;&lt; std::endl;
00273   err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a52">unsetSelEllipse</a>();
00274   myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a29">getNumSelRows</a>(&amp;numRows);
00275   std::cout &lt;&lt; <span class="stringliteral">"* Number of SELECTED rows = "</span> &lt;&lt; numRows &lt;&lt; std::endl;
00276   std::cout &lt;&lt; <span class="stringliteral">"* Calling: unsetCuts()"</span> &lt;&lt; std::endl;
00277   err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a48">unsetCuts</a>();
00278   myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a29">getNumSelRows</a>(&amp;numRows);
00279   std::cout &lt;&lt; <span class="stringliteral">"* Number of SELECTED rows = "</span> &lt;&lt; numRows &lt;&lt; std::endl;
00280 
00281   std::cout &lt;&lt; <span class="stringliteral">"\n* Getting limits on Count"</span> &lt;&lt; std::endl;
00282   minErr=0.0;
00283   time1=time(&amp;time1);
00284   err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a27">minVal</a>(<span class="stringliteral">"Count"</span>, &amp;rVal);
00285   <span class="keywordflow">if</span> (err &gt; 0) {
00286     <a class="code" href="main__test_8time_8cxx.html#a4">show_double</a>(<span class="stringliteral">"Count min"</span>, rVal);
00287     minErr=rVal;
00288   }
00289   err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a28">maxVal</a>(<span class="stringliteral">"Count"</span>, &amp;rVal);
00290   <span class="keywordflow">if</span> (err &gt; 0) <a class="code" href="main__test_8time_8cxx.html#a4">show_double</a>(<span class="stringliteral">"Count max"</span>, rVal);
00291   time2=time(&amp;time2);
00292   sec=difftime(time2, time1);
00293   std::cout &lt;&lt; <span class="stringliteral">"* Results (after "</span> &lt;&lt; sec &lt;&lt; <span class="stringliteral">" seconds)"</span> &lt;&lt; std::endl;
00294 
00295   <span class="keywordflow">if</span> (minErr &gt; 0.0) {
00296     std::cout &lt;&lt; <span class="stringliteral">"\n* Setting cuts on Count"</span> &lt;&lt; std::endl;
00297     time1=time(&amp;time1);
00298     err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a53">setLowerCut</a>(<span class="stringliteral">"Count"</span>, minErr);
00299     err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a54">setUpperCut</a>(<span class="stringliteral">"Count"</span>, minErr*2.0);
00300     time2=time(&amp;time2);
00301     sec=difftime(time2, time1);
00302     myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a29">getNumSelRows</a>(&amp;numRows);
00303     std::cout &lt;&lt; <span class="stringliteral">"* Number of SELECTED rows = "</span> &lt;&lt; numRows &lt;&lt; <span class="stringliteral">" (after "</span>
00304               &lt;&lt; sec &lt;&lt; <span class="stringliteral">" seconds)"</span> &lt;&lt; std::endl;
00305     listVal.assign(100, minErr);
00306     std::cout &lt;&lt; <span class="stringliteral">"\n* Excluding "</span> &lt;&lt; minErr &lt;&lt; <span class="stringliteral">" from Count"</span> &lt;&lt; std::endl;
00307     time1=time(&amp;time1);
00308     err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a57">excludeN</a>(<span class="stringliteral">"Count"</span>, listVal);
00309     time2=time(&amp;time2);
00310     sec=difftime(time2, time1);
00311     myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a29">getNumSelRows</a>(&amp;numRows);
00312     std::cout &lt;&lt; <span class="stringliteral">"* Number of SELECTED rows = "</span> &lt;&lt; numRows &lt;&lt; <span class="stringliteral">" (after "</span>
00313               &lt;&lt; sec &lt;&lt; <span class="stringliteral">" seconds)"</span> &lt;&lt; std::endl;
00314     listVal[1]=minErr*2.0;
00315     std::cout &lt;&lt; <span class="stringliteral">"* Excluding also "</span>&lt;&lt; minErr*2.0 &lt;&lt;<span class="stringliteral">" (with precision 10%) from Count"</span> &lt;&lt; std::endl;
00316     time1=time(&amp;time1);
00317     err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a57">excludeN</a>(<span class="stringliteral">"Count"</span>, listVal);
00318     err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a61">setMatchPercent</a>(<span class="stringliteral">"Count"</span>, 10);
00319     time2=time(&amp;time2);
00320     sec=difftime(time2, time1);
00321     myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a29">getNumSelRows</a>(&amp;numRows);
00322     std::cout &lt;&lt; <span class="stringliteral">"* Number of SELECTED rows = "</span> &lt;&lt; numRows &lt;&lt; <span class="stringliteral">" (after "</span>
00323             &lt;&lt; sec &lt;&lt; <span class="stringliteral">" seconds)"</span> &lt;&lt; std::endl;
00324 
00325     listVal[0]=0.0;
00326     std::cout &lt;&lt; <span class="stringliteral">"* Excluding 0 and "</span>&lt;&lt; minErr*2.0 &lt;&lt;<span class="stringliteral">" (with precision 1%) from Count"</span> &lt;&lt; std::endl;
00327     time1=time(&amp;time1);
00328     err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a57">excludeN</a>(<span class="stringliteral">"Count"</span>, listVal);
00329     err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a61">setMatchPercent</a>(<span class="stringliteral">"Count"</span>, 1.0);
00330     time2=time(&amp;time2);
00331     sec=difftime(time2, time1);
00332     myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a29">getNumSelRows</a>(&amp;numRows);
00333     std::cout &lt;&lt; <span class="stringliteral">"* Number of SELECTED rows = "</span> &lt;&lt; numRows &lt;&lt; <span class="stringliteral">" (after "</span>
00334               &lt;&lt; sec &lt;&lt; <span class="stringliteral">" seconds)"</span> &lt;&lt; std::endl;
00335   }
00336 
00337   std::cout &lt;&lt; <span class="stringliteral">"\n* Calling importSelected()"</span> &lt;&lt; std::endl;
00338   myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a20">deleteContent</a>();
00339   time1=time(&amp;time1);
00340   err=myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a10">importSelected</a>();
00341   <span class="keywordflow">if</span> (err &gt;= 0) {
00342     time2=time(&amp;time2);
00343     sec=difftime(time2, time1);
00344     myCat-&gt;<a class="code" href="classcatalog_access_1_1_catalog.html#a21">getNumRows</a>(&amp;numRows);
00345     std::cout &lt;&lt; <span class="stringliteral">"* Number of rows = "</span> &lt;&lt; numRows &lt;&lt; <span class="stringliteral">" (after "</span>
00346               &lt;&lt; sec &lt;&lt; <span class="stringliteral">" seconds)"</span> &lt;&lt; std::endl;
00347 
00348   }
00349   <span class="keyword">delete</span> myCat;
00350 <span class="comment">/****************************************************************************/</span>
00351 fin:
00352   today=time(&amp;today);
00353   strftime(when, 30, <span class="stringliteral">"%H:%M:%S (TU) %d-%b-%Y"</span>, gmtime(&amp;today));
00354   printf(<span class="stringliteral">"\n!END PROGRAM! %s\n\n"</span>, when);
00355   <span class="keywordflow">return</span> 1;
00356 }
00357  
<a name="l00358"></a><a class="code" href="main__test_8time_8cxx.html#a1">00358</a> <span class="keywordtype">void</span> <a class="code" href="main__test_8cxx.html#a2">help</a>() {
00359  std::cerr &lt;&lt; <span class="stringliteral">"usage: &lt;program name&gt; &lt;axis size&gt; [&lt;options&gt; &lt;fileName&gt;]\n"</span>
00360            &lt;&lt; <span class="stringliteral">"options: \n"</span>
00361            &lt;&lt; <span class="stringliteral">"  -help  to show this help\n"</span>
00362            &lt;&lt; std::endl;
00363 }
00364 
<a name="l00365"></a><a class="code" href="main__test_8time_8cxx.html#a2">00365</a> <span class="keywordtype">void</span> <a class="code" href="main__test_8time_8cxx.html#a2">show_quant</a>(<span class="keyword">const</span> <a class="code" href="classcatalog_access_1_1_quantity.html">catalogAccess::Quantity</a> &amp;nQ) {
00366   std::cout &lt;&lt; nQ.<a class="code" href="classcatalog_access_1_1_quantity.html#m0">m_name</a> &lt;&lt;<span class="stringliteral">": ucd=\""</span>&lt;&lt; nQ.<a class="code" href="classcatalog_access_1_1_quantity.html#m2">m_ucd</a> &lt;&lt;<span class="stringliteral">"\", type="</span>&lt;&lt; nQ.<a class="code" href="classcatalog_access_1_1_quantity.html#m4">m_type</a>
00367            &lt;&lt;<span class="stringliteral">", unit=\""</span>&lt;&lt; nQ.<a class="code" href="classcatalog_access_1_1_quantity.html#m5">m_unit</a> &lt;&lt;<span class="stringliteral">"\", format=\""</span>&lt;&lt; nQ.<a class="code" href="classcatalog_access_1_1_quantity.html#m3">m_format</a>
00368           &lt;&lt;<span class="stringliteral">"\",\n     index="</span>&lt;&lt; nQ.<a class="code" href="classcatalog_access_1_1_quantity.html#m6">m_index</a>
00369          &lt;&lt;<span class="stringliteral">", boolGeneric="</span>&lt;&lt; nQ.<a class="code" href="classcatalog_access_1_1_quantity.html#m7">m_isGeneric</a> &lt;&lt;<span class="stringliteral">", boolNaN="</span>&lt;&lt; nQ.<a class="code" href="classcatalog_access_1_1_quantity.html#m17">m_rejectNaN</a>
00370         &lt;&lt;<span class="stringliteral">"\n     selectList sizes=("</span>&lt;&lt; nQ.<a class="code" href="classcatalog_access_1_1_quantity.html#m14">m_listValN</a>.size() &lt;&lt;<span class="stringliteral">" num, "</span>
00371        &lt;&lt; nQ.<a class="code" href="classcatalog_access_1_1_quantity.html#m11">m_listValS</a>.size() &lt;&lt;<span class="stringliteral">" str), cuts="</span> &lt;&lt; nQ.<a class="code" href="classcatalog_access_1_1_quantity.html#m12">m_lowerCut</a> &lt;&lt;<span class="stringliteral">" to "</span>
00372       &lt;&lt; nQ.<a class="code" href="classcatalog_access_1_1_quantity.html#m13">m_upperCut</a> &lt;&lt; <span class="stringliteral">"\ncomment=\""</span>&lt;&lt; nQ.<a class="code" href="classcatalog_access_1_1_quantity.html#m1">m_comment</a> &lt;&lt; <span class="stringliteral">"\""</span> &lt;&lt; std::endl;
00373 }
<a name="l00374"></a><a class="code" href="main__test_8time_8cxx.html#a3">00374</a> <span class="keywordtype">void</span> <a class="code" href="main__test_8time_8cxx.html#a3">show_string</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> std::string val) {
00375   std::cout &lt;&lt; <span class="stringliteral">"Quantity "</span> &lt;&lt; name &lt;&lt; <span class="stringliteral">": \""</span> &lt;&lt; val &lt;&lt;<span class="stringliteral">"\""</span>&lt;&lt; std::endl; 
00376 }
<a name="l00377"></a><a class="code" href="main__test_8time_8cxx.html#a4">00377</a> <span class="keywordtype">void</span> <a class="code" href="main__test_8time_8cxx.html#a4">show_double</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> <span class="keywordtype">double</span> val) {
00378   std::cout &lt;&lt; <span class="stringliteral">"Quantity "</span> &lt;&lt; name &lt;&lt; <span class="stringliteral">" = "</span> <span class="comment">//&lt;&lt; std::setprecision(4)</span>
00379 <span class="comment">//            &lt;&lt; val &lt;&lt; std::endl;</span>
00380             &lt;&lt; std::setiosflags(outDouble) &lt;&lt; std::setprecision(3)
00381             &lt;&lt; std::setw(11) &lt;&lt; std::setfill(<span class="charliteral">' '</span>)
00382             &lt;&lt; val &lt;&lt; std::resetiosflags(outDouble) &lt;&lt; std::endl;
00383 }
</pre></div><hr><address style="align: right;"><small>Generated on Fri Jun 10 14:51:23 2005 for catalogAccess by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.18 </small></address>
</body>
</html>
