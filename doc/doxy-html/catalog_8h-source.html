<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>catalog.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.18 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>catalog.h</h1><a href="catalog_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 
00011 <span class="preprocessor">#ifndef catalogAccess_cat_h</span>
00012 <span class="preprocessor"></span><span class="preprocessor">#define catalogAccess_cat_h</span>
00013 <span class="preprocessor"></span>
00014 <span class="preprocessor">#include "tip/IFileSvc.h"</span>
00015 <span class="preprocessor">#include "tip/Table.h"</span>
00016 <span class="preprocessor">#include "<a class="code" href="quantity_8h.html">quantity.h</a>"</span>
00017 <span class="comment">// can compile without first three</span>
00018 <span class="comment">//#include &lt;cctype&gt;      //for toupper, tolower</span>
00019 <span class="comment">//#include &lt;algorithm&gt;   //for transform</span>
00020 <span class="comment">//#include &lt;cstdio&gt;      //for sprintf</span>
00021 <span class="preprocessor">#include &lt;fstream&gt;</span>    <span class="comment">//for ifstream, ofstream</span>
00022 <span class="comment">//#include &lt;dirent.h&gt;   //for DIR type </span>
00023 <span class="preprocessor">#include &lt;iomanip&gt;</span>    <span class="comment">//for setprecision, _Ios_Fmtflags, ...</span>
00024 <span class="preprocessor">#include &lt;stdexcept&gt;</span>  <span class="comment">//for std::runtime_error</span>
00025 
<a name="l00026"></a><a class="code" href="catalog_8h.html#a0">00026</a> <span class="preprocessor">#define MAX_CAT 10              // number of known catalogs</span>
<a name="l00027"></a><a class="code" href="catalog_8h.html#a1">00027</a> <span class="preprocessor"></span><span class="preprocessor">#define MAX_GEN  6              // number of generic quantities</span>
<a name="l00028"></a><a class="code" href="catalog_8h.html#a2">00028</a> <span class="preprocessor"></span><span class="preprocessor">#define MAX_URL  9              // number of known VizieR web address</span>
<a name="l00029"></a><a class="code" href="catalog_8h.html#a3">00029</a> <span class="preprocessor"></span><span class="preprocessor">#define MAX_LINE 1025           // (maximum number of char)+1 with getline</span>
00030 <span class="preprocessor"></span><span class="keyword">namespace </span>catalogAccess {
00031 
<a name="l00044"></a><a class="code" href="classcatalog_access_1_1_catalog.html">00044</a> <span class="keyword">class </span><a class="code" href="classcatalog_access_1_1_catalog.html">Catalog</a> {
00045 
00046 <span class="keyword">public</span>:
00047 
00048   <a class="code" href="classcatalog_access_1_1_catalog.html#a0">Catalog</a>();                    <span class="comment">// Default constructor</span>
00049   <a class="code" href="classcatalog_access_1_1_catalog.html#a1">~Catalog</a>();                   <span class="comment">// Destructor needed to free memory</span>
00050   <a class="code" href="classcatalog_access_1_1_catalog.html#a0">Catalog</a>(<span class="keyword">const</span> <a class="code" href="classcatalog_access_1_1_catalog.html">Catalog</a> &amp; );    <span class="comment">// Copy constructor needed</span>
00051 
00052 
00053   <span class="comment">// Methods giving general information</span>
00054   <span class="comment">//-----------------------------------</span>
00055 
00056   <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classcatalog_access_1_1_catalog.html#d0">getCatList</a>(std::vector&lt;std::string&gt; *names,
00057                          <span class="keyword">const</span> <span class="keywordtype">bool</span> isCode=<span class="keyword">true</span>);
00058       <span class="comment">// return a list of all supported catalog names</span>
00059   <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classcatalog_access_1_1_catalog.html#d1">getWebList</a>(std::vector&lt;std::string&gt; *names,
00060                          <span class="keyword">const</span> <span class="keywordtype">bool</span> isCode=<span class="keyword">true</span>);
00061       <span class="comment">// return a list of all supported web site names</span>
00062 
00063   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a3">getMaxNumRows</a>(<span class="keywordtype">long</span> *nrows, <span class="keyword">const</span> std::string &amp;fileName);
00064   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a4">getMaxNumRowsWeb</a>(<span class="keywordtype">long</span> *nrows, <span class="keyword">const</span> std::string catName,
00065                        <span class="keyword">const</span> std::string urlCode=<span class="stringliteral">"cds"</span>); 
00066       <span class="comment">// to know the maximal number of rows in the file or in the CDS catalog </span>
00067 
00068 
00069   <span class="comment">// Methods for importing, saving, loading</span>
00070   <span class="comment">//---------------------------------------</span>
00071 
00072   <span class="keywordtype">long</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a5">getRAMsize</a>(<span class="keyword">const</span> <span class="keywordtype">long</span> numRows=44000, <span class="keyword">const</span> <span class="keywordtype">bool</span> writeLog=<span class="keyword">false</span>);
00073       <span class="comment">// return the number of RAM bytes needed for numRows catalog rows</span>
00074       <span class="comment">// if writeLog is true (as called by import below) write info in Log</span>
00075 
00076   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a6">importDescription</a>(<span class="keyword">const</span> std::string &amp;fileName, <span class="keyword">const</span> std::string ext=<span class="stringliteral">"1"</span>);
00077   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a7">importDescriptionWeb</a>(<span class="keyword">const</span> std::string catName,
00078                            <span class="keyword">const</span> std::string urlCode=<span class="stringliteral">"cds"</span>,
00079                            <span class="keyword">const</span> std::string &amp;fileName=<span class="stringliteral">""</span>);
00080       <span class="comment">// read only the catalog description (i.e. fill the</span>
00081       <span class="comment">// m_quantities vector and m_code, etc.)</span>
00082       <span class="comment">// the method returns the number of quantities,</span>
00083       <span class="comment">// -1 if importDescription already done, -3 if catName is unknown</span>
00084       <span class="comment">// other negative number for loading error</span>
00085 
00086 
00087   <span class="keywordtype">int</span> <span class="keyword">import</span>(<span class="keyword">const</span> std::string &amp;fileName, <span class="keyword">const</span> <span class="keywordtype">long</span> maxRow=0,
00088              <span class="keyword">const</span> std::string ext=<span class="stringliteral">"1"</span>);
00089   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a9">importWeb</a>(<span class="keyword">const</span> std::string catName, <span class="keyword">const</span> std::string urlCode=<span class="stringliteral">"cds"</span>,
00090                 <span class="keyword">const</span> <span class="keywordtype">long</span> maxRow=44000, <span class="keyword">const</span> std::string &amp;fileName=<span class="stringliteral">""</span>);
00091       <span class="comment">// import method for loading an entire catalog without selection</span>
00092       <span class="comment">// * recognizes catalog name and identifies the files to load</span>
00093       <span class="comment">// * translates the generic quantities</span>
00094       <span class="comment">// * loads non-generic quantities</span>
00095       <span class="comment">// the method returns the number of loaded rows,</span>
00096       <span class="comment">// -1 if successful import already done, -3 if catName is unknown,</span>
00097       <span class="comment">// other negative number for loading error</span>
00098 
00099   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a10">importSelected</a>();
00100       <span class="comment">// if a catalog description was already loaded, this method does</span>
00101       <span class="comment">// the same as import(). However, it applies selection criteria</span>
00102       <span class="comment">// such that quantities which are not passing the criteria are not </span>
00103       <span class="comment">// loaded;</span>
00104       <span class="comment">// the method returns the number of loaded rows,</span>
00105       <span class="comment">// -1 if successful import already done, -2 if importDescription not done</span>
00106       <span class="comment">// other negative number for loading error      </span>
00107 
00108   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a11">save</a>(<span class="keyword">const</span> std::string fileName, <span class="keywordtype">bool</span> no_replace);
00109       <span class="comment">// save the catalog information presently in memory to a FITS file</span>
00110       <span class="comment">// the method returns 1 if successful, negative number otherwise</span>
00111 
00112 <span class="comment">//  int saveSelected(const std::string fileName, bool no_replace);</span>
00113       <span class="comment">// like save(), however, storing only the selected rows</span>
00114       <span class="comment">// the method returns 1 if successful, negative number otherwise</span>
00115 
00116 <span class="comment">//  int load(const std::string fileName);</span>
00117       <span class="comment">// same as import(), only the data is loaded from a FITS file</span>
00118       <span class="comment">// compatible with the save() method</span>
00119 
00120 
00121   <span class="comment">// Methods for accessing data</span>
00122   <span class="comment">//---------------------------</span>
00123 
00124   <span class="comment">// accessing the Catalog definition</span>
00125 
00126   <span class="keywordtype">void</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a12">getCatalogTitles</a>(std::vector&lt;std::string&gt; *titles);
00127       <span class="comment">// get the 6 definition strings if vector size is enough</span>
00128       <span class="comment">// otherwise get only m_code (size 0 or 1) or m_URL, etc.</span>
00129 <span class="comment">/*  void getQuantityIter(std::vector&lt;Quantity&gt;::const_iterator *iter);*/</span>
00130       <span class="comment">// get an iterator on the quantities</span>
00131   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a13">getQuantityDescription</a>(std::vector&lt;Quantity&gt; *myQuantities);
00132       <span class="comment">// get a copy of the quantity vector</span>
00133   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a14">getQuantityNames</a>(std::vector&lt;std::string&gt; *names);  <span class="comment">// get only the names</span>
00134   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a15">getQuantityUnits</a>(std::vector&lt;std::string&gt; *units);  <span class="comment">// get only the units</span>
00135   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a16">getQuantityUCDs</a> (std::vector&lt;std::string&gt; *ucds);   <span class="comment">// get only the UCDs</span>
00136   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a17">getQuantityTypes</a>(std::vector&lt;Quantity::QuantityType&gt; *types);
00137       <span class="comment">// get only the types</span>
00138 
00139   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a18">getStatErrorName</a>(<span class="keyword">const</span> std::string name, std::string *statErrName);
00140       <span class="comment">// get the member "statErrName" of given quantity "name",</span>
00141       <span class="comment">// identifying the statistical error quantity</span>
00142   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a19">getSysErrorName</a>(<span class="keyword">const</span> std::string name, std::string *sysErrName);
00143       <span class="comment">// get the member "sysErrName" of given quantity "name",</span>
00144       <span class="comment">// identifying the systematic error quantity</span>
00145 <span class="comment">/*  int getVecQNames(const std::string name,</span>
00146 <span class="comment">                   std::vector&lt;std::string&gt; *vecNames);*/</span>
00147       <span class="comment">// get the list of the names of the quantities which</span>
00148       <span class="comment">// form the elements of the given VECTOR "name"</span>
00149 
00150 
00151   <span class="comment">// accessing all the Catalog contents in memory</span>
00152   <span class="comment">//       (ignoring in-memory selection criteria)</span>
00153 
00154 
00155   <span class="keywordtype">void</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a20">deleteContent</a>();
00156       <span class="comment">// erase m_strings, m_numericals but keep catalog definition</span>
00157 
00158   <span class="keywordtype">void</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a21">getNumRows</a>(<span class="keywordtype">long</span> *nrows);  <span class="comment">// get the number of rows in the catalog</span>
00159   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a22">getSValue</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> <span class="keywordtype">long</span> row, std::string *stringVal);
00160       <span class="comment">// get the value of the given string quantity "name"</span>
00161       <span class="comment">// in the given catalog row</span>
00162   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a23">getNValue</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> <span class="keywordtype">long</span> row, <span class="keywordtype">double</span> *realVal);
00163       <span class="comment">// get the value of the given numerical quantity "name"</span>
00164       <span class="comment">// in the given catalog row</span>
00165 <span class="comment">/*  int getVecValues(const std::string name, const  int row,</span>
00166 <span class="comment">                   std::vector&lt;double&gt; *vecVal);*/</span>
00167       <span class="comment">// get the values of the given vector quantity "name"</span>
00168       <span class="comment">// in the given catalog row</span>
00169   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a24">getStatError</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> <span class="keywordtype">long</span> row, <span class="keywordtype">double</span> *realValStat);
00170       <span class="comment">// get the value of the statistical error associated with quantity "name"</span>
00171       <span class="comment">// in the given catalog row;</span>
00172       <span class="comment">// value is negative if unavailable</span>
00173   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a25">getSysError</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> <span class="keywordtype">long</span> row, <span class="keywordtype">double</span> *realValSys);
00174       <span class="comment">// get the value of the sytematic error associated with quantity "name"</span>
00175       <span class="comment">// in the given catalog row;</span>
00176       <span class="comment">// value is negative if unavailable</span>
00177 <span class="comment">/*  int getVecStatErrors(const std::string name, const long row,</span>
00178 <span class="comment">                       std::vector&lt;double&gt; *vecValStat);*/</span>
00179       <span class="comment">// get the statistical errors associated with vector quantity "name"</span>
00180       <span class="comment">// in the given catalog row</span>
00181 <span class="comment">/*  int getVecSysErrors(const std::string name, const long row,</span>
00182 <span class="comment">                      std::vector&lt;double&gt; *vecValSys);*/</span>
00183       <span class="comment">// get the systematic errors associated with vector quantity "name"</span>
00184       <span class="comment">// in the given catalog row</span>
00185 
00186   <span class="comment">// possible values or range of a given quantity "name"</span>
00187 
00188   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a26">getSValues</a>(<span class="keyword">const</span> std::string name, std::vector&lt;std::string&gt; *values);
00189       <span class="comment">// for numerical quantity: empty</span>
00190       <span class="comment">// for string quantity: the list of different values assumed</span>
00191   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a27">minVal</a>(<span class="keyword">const</span> std::string name, <span class="keywordtype">double</span> *realVal);
00192       <span class="comment">// for string quantity: undefined; default == NO_SEL_CUT</span>
00193       <span class="comment">// for numerical quantity: the minimum value in the catalog</span>
00194   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a28">maxVal</a>(<span class="keyword">const</span> std::string name, <span class="keywordtype">double</span> *realVal);
00195       <span class="comment">// for string quantity: undefined; default == NO_SEL_CUT</span>
00196       <span class="comment">// for numerical quantity: the maximum value in the catalog</span>
00197 
00198 
00199   <span class="comment">// accessing the Catalog contents with in-memory selection criteria applied</span>
00200   <span class="comment">// the row index relates to the selected rows, i.e. is continuous!</span>
00201 
00202   <span class="keywordtype">void</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a29">getNumSelRows</a>(<span class="keywordtype">long</span> *nrows);
00203       <span class="comment">// get the number of selected rows in the catalog</span>
00204   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a30">getSelSValue</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> <span class="keywordtype">long</span> srow,
00205                    std::string *stringVal);
00206   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a31">getSelNValue</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> <span class="keywordtype">long</span> srow, <span class="keywordtype">double</span> *realVal);
00207 <span class="comment">/*  int getSelVecValues(const std::string name, const long srow,</span>
00208 <span class="comment">                      std::vector&lt;double&gt; *vecVal);*/</span>
00209   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a32">getSelStatError</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> <span class="keywordtype">long</span> srow,
00210                       <span class="keywordtype">double</span> *realValStat);
00211   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a33">getSelSysError</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> <span class="keywordtype">long</span> srow,
00212                      <span class="keywordtype">double</span> *realValSys);
00213 <span class="comment">/*  int getSelVecStatErrors(const std::string name, const long srow,</span>
00214 <span class="comment">                          std::vector&lt;double&gt; *vecValStat);</span>
00215 <span class="comment">  int getSelVecSysErrors(const std::string name, const long srow,</span>
00216 <span class="comment">                       std::vector&lt;double&gt; *vecValSys);*/</span>
00217 
00218   <span class="comment">// possible values or range of a given quantity "name" in the selected rows</span>
00219 
00220   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a34">getSelSValues</a>(<span class="keyword">const</span> std::string name, std::vector&lt;std::string&gt; *values);
00221   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a35">minSelVal</a>(<span class="keyword">const</span> std::string name, <span class="keywordtype">double</span> *realVal);
00222   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a36">maxSelVal</a>(<span class="keyword">const</span> std::string name, <span class="keywordtype">double</span> *realVal);
00223 
00224 
00225   <span class="comment">// quick access to generic quantities with or without in-memory selection;</span>
00226 
00227   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a37">ra_deg</a>(<span class="keyword">const</span> <span class="keywordtype">long</span> row, <span class="keywordtype">double</span> *realVal, <span class="keyword">const</span> <span class="keywordtype">bool</span> inSelection=<span class="keyword">false</span>);
00228       <span class="comment">// access to generic quantity for RA  (degrees)</span>
00229   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a38">dec_deg</a>(<span class="keyword">const</span> <span class="keywordtype">long</span> row, <span class="keywordtype">double</span> *realVal, <span class="keyword">const</span> <span class="keywordtype">bool</span> inSelection=<span class="keyword">false</span>);
00230       <span class="comment">// access to generic quantity for DEC (degrees)</span>
00231   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a39">posError_deg</a>(<span class="keyword">const</span> <span class="keywordtype">long</span> row, <span class="keywordtype">double</span> *realVal,
00232                    <span class="keyword">const</span> <span class="keywordtype">bool</span> inSelection=<span class="keyword">false</span>);
00233       <span class="comment">// access to generic quantity for position uncertainty (degrees)</span>
00234 
00235   <span class="comment">// 6 methods returning the name of generic quantities (to use any methods)</span>
00236 
00237   std::string <a class="code" href="classcatalog_access_1_1_catalog.html#a40">getNameRA</a>();
00238   std::string <a class="code" href="classcatalog_access_1_1_catalog.html#a41">getNameDEC</a>();
00239   std::string <a class="code" href="classcatalog_access_1_1_catalog.html#a42">getNamePosErr</a>();
00240   std::string <a class="code" href="classcatalog_access_1_1_catalog.html#a43">getNameL</a>();
00241   std::string <a class="code" href="classcatalog_access_1_1_catalog.html#a44">getNameB</a>();
00242   std::string <a class="code" href="classcatalog_access_1_1_catalog.html#a45">getNameObjName</a>();
00243 
00244 
00245   <span class="comment">// Methods for selecting data</span>
00246   <span class="comment">//---------------------------</span>
00247 
00248   <span class="comment">// All setting or unsetting of cuts immediately takes effect,</span>
00249   <span class="comment">// i.e. the value of the vector m_rowIsSelected is recalculated.</span>
00250   <span class="comment">// Except for the 2 following methods with no impact on m_rowIsSelected:</span>
00251 
00252   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a46">selectQuantity</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> <span class="keywordtype">bool</span> toBeLoaded);
00253       <span class="comment">// select or unselect a given quantity before loading,</span>
00254       <span class="comment">// importSelected() will actually load selected quantities</span>
00255   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a47">selectAllQuantities</a>(<span class="keyword">const</span> <span class="keywordtype">bool</span> toBeLoaded);
00256       <span class="comment">// idem on all quantities at once</span>
00257 
00258   <span class="comment">// comment: all 'unset' methods have only an effect if the cuts were applied</span>
00259   <span class="comment">// after loading the data AND the eraseNonSelected method was not called</span>
00260 
00261   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a49">unsetCuts</a>(<span class="keyword">const</span> std::string name);
00262       <span class="comment">// unset all selection criteria relating to quantity "name"</span>
00263   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a49">unsetCuts</a>();
00264       <span class="comment">// unset all cuts on all quantities except the selection ellipse;</span>
00265       <span class="comment">// this also deletes the selection string</span>
00266 
00267   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a50">setCriteriaORed</a>(<span class="keyword">const</span> <span class="keywordtype">bool</span> bitOR=<span class="keyword">true</span>);
00268       <span class="comment">// if true, criteria between quantities are ORed instead of ANDed</span>
00269 
00270   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a51">setSelEllipse</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> centRA_deg, <span class="keyword">const</span> <span class="keywordtype">double</span> centDEC_deg,
00271                     <span class="keyword">const</span> <span class="keywordtype">double</span> majAxis_deg, <span class="keyword">const</span> <span class="keywordtype">double</span> minAxis_deg,
00272                     <span class="keyword">const</span> <span class="keywordtype">double</span> rot_deg=0.);
00273       <span class="comment">// set and apply an elliptical selection region</span>
00274       <span class="comment">// (box cuts of constant size CANNOT be achieved)</span>
00275   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a52">unsetSelEllipse</a>();        <span class="comment">// remove the effects of the ellipse selection</span>
00276 
00277   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a53">setLowerCut</a>(<span class="keyword">const</span> std::string name, <span class="keywordtype">double</span> cutVal);
00278       <span class="comment">// set and apply a cut on quantity "name" (all values &gt;= cutVal pass)</span>
00279       <span class="comment">// double is not const because it can be locally modified to NO_SEL_CUT</span>
00280   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a54">setUpperCut</a>(<span class="keyword">const</span> std::string name, <span class="keywordtype">double</span> cutVal);
00281       <span class="comment">// set and apply a cut on quantity "name" (all values &lt;= cutVal pass)</span>
00282       <span class="comment">// double is not const because it can be locally modified to NO_SEL_CUT</span>
00283 <span class="comment">/*  int setLowerVecCuts(const std::string name,</span>
00284 <span class="comment">                      const std::vector&lt;double&gt; &amp;cutValues);*/</span>
00285       <span class="comment">// set and apply a cut on quantities in VECTOR type quantity "name"</span>
00286       <span class="comment">// such that all values &gt;= cutValues[i] pass</span>
00287 <span class="comment">/*  int setUpperVecCuts(const std::string name,</span>
00288 <span class="comment">                      const std::vector&lt;double&gt; &amp;cutValues);*/</span>
00289       <span class="comment">// set and apply a cut on quantities in VECTOR type quantity "name"</span>
00290       <span class="comment">// such that all values &lt;= cutValues[i] pass</span>
00291   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a55">excludeS</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> std::vector&lt;std::string&gt; &amp;slist,
00292                <span class="keyword">const</span> <span class="keywordtype">bool</span> exact=<span class="keyword">false</span>);
00293       <span class="comment">// exclude all rows which have string value in the given list</span>
00294   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a56">useOnlyS</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> std::vector&lt;std::string&gt; &amp;slist,
00295                <span class="keyword">const</span> <span class="keywordtype">bool</span> exact=<span class="keyword">false</span>);
00296       <span class="comment">// only include rows which have string value in the given list</span>
00297   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a57">excludeN</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> std::vector&lt;double&gt; &amp;listVal);
00298       <span class="comment">// include rows which value is NOT around one numerical in list</span>
00299       <span class="comment">// AND value is inside the cut interval</span>
00300   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a58">useOnlyN</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> std::vector&lt;double&gt; &amp;listVal);
00301       <span class="comment">// only include rows which value is around one numerical in list</span>
00302       <span class="comment">// AND is inside the cut interval</span>
00303   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a59">includeN</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> std::vector&lt;double&gt; &amp;listVal);
00304       <span class="comment">// only include rows which value is around one numerical in list</span>
00305       <span class="comment">// OR is inside the cut interval</span>
00306   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a60">setRejectNaN</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> <span class="keywordtype">bool</span> rejectNaN);
00307       <span class="comment">// set quantity member m_rejectNaN and apply</span>
00308       <span class="comment">// (if different from previous and quantity is selected)  </span>
00309   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a61">setMatchPercent</a>(<span class="keyword">const</span> std::string name, <span class="keywordtype">double</span> percent);
00310   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a62">setMatchEpsilon</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> step);
00311       <span class="comment">// set quantity member m_precision and apply</span>
00312       <span class="comment">// (if quantity has a non empty selection list)   </span>
00313   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a63">checkValWithinCut</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> <span class="keywordtype">double</span> value,
00314                         <span class="keywordtype">bool</span> *cutLow, <span class="keywordtype">bool</span> *cutUp, <span class="keywordtype">int</span> *checkResult);
00315       <span class="comment">// check if value (that could be used for list selection) is incompatible</span>
00316       <span class="comment">// with the cut of given quantity</span>
00317       <span class="comment">// Is given value within interval cut (boolean true if cut exist) ?</span>
00318       <span class="comment">// 0 means within interval (or no cut, both boolean false)</span>
00319       <span class="comment">// negative if below LowerCut, positive if above UpperCut;</span>
00320       <span class="comment">// -2 or 2 if value and precision sphere outside cut (useOnlyN can't</span>
00321       <span class="comment">//         select anything, value useless for excludeS)</span>
00322       <span class="comment">// -1 or 1 if value outside cut but precision sphere cross cut</span>
00323 
00324   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a64">eraseNonSelected</a>();
00325       <span class="comment">// erase all non-selected rows from memory</span>
00326   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a65">eraseSelected</a>();
00327       <span class="comment">// erase all selected rows from memory</span>
00328 
00329 
00330   <span class="comment">// general cut described by string to be parsed</span>
00331 
00332 <span class="comment">/*  int setCutString(const std::string stringVal);*/</span>
00333       <span class="comment">// set the selection string m_selection</span>
00334       <span class="comment">// Syntax:</span>
00335       <span class="comment">// a) quantities are described by giving their name</span>
00336       <span class="comment">//    in square brackets, e.g. [f6cm]</span>
00337       <span class="comment">// b) otherwise FORTRAN syntax is used, e.g.</span>
00338       <span class="comment">//   "[f6cm].geq.[f12cm].and.([hr1]-[hr2]).lt.2.3"</span>
00339       <span class="comment">//</span>
00340       <span class="comment">// returns 1 if expression is correct, negative number otherwise</span>
00341 
00342 <span class="comment">/*  void getCutString(std::string *stringVal);*/</span>
00343       <span class="comment">// get a copy of m_selection</span>
00344     
00345 <span class="comment">/*  int selStringTrue(const long row, bool *isSelected);*/</span>
00346       <span class="comment">// return true if the condition described by m_selection is true</span>
00347       <span class="comment">// for the given row, otherwise false</span>
00348 
00349 
00350   <span class="comment">// Methods for sorting</span>
00351   <span class="comment">//--------------------</span>
00352 
00353   <span class="comment">// will use sorting methods present in the standard template library</span>
00354 
00355 <span class="comment">//  void sortAscend(const std::string quantityName);</span>
00356       <span class="comment">// reassign the row numbers by sorting by the given</span>
00357       <span class="comment">// quantity in ascending order</span>
00358 
00359 <span class="comment">//  void sortDecend(const std::string quantityName);</span>
00360       <span class="comment">// reassign the row numbers by sorting by the given</span>
00361       <span class="comment">// quantity in decending order</span>
00362 
00363 <span class="comment">/**********************************************************************/</span>
00364 <span class="keyword">private</span>:
00365 
<a name="l00366"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o0">00366</a>   std::string <a class="code" href="classcatalog_access_1_1_catalog.html#o0">m_code</a>;
<a name="l00367"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o1">00367</a>   std::string <a class="code" href="classcatalog_access_1_1_catalog.html#o1">m_URL</a>;
<a name="l00368"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o2">00368</a>   std::string <a class="code" href="classcatalog_access_1_1_catalog.html#o2">m_catName</a>;
<a name="l00369"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o3">00369</a>   std::string <a class="code" href="classcatalog_access_1_1_catalog.html#o3">m_catRef</a>;
<a name="l00370"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o4">00370</a>   std::string <a class="code" href="classcatalog_access_1_1_catalog.html#o4">m_tableName</a>;
<a name="l00371"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o5">00371</a>   std::string <a class="code" href="classcatalog_access_1_1_catalog.html#o5">m_tableRef</a>;
<a name="l00372"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o6">00372</a>   std::fstream <a class="code" href="classcatalog_access_1_1_catalog.html#o6">myFile</a>;    <span class="comment">// input/output file</span>
<a name="l00373"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o7">00373</a>   <span class="keywordtype">long</span>        <a class="code" href="classcatalog_access_1_1_catalog.html#o7">m_filePos</a>;  <span class="comment">// position where data start for importSelected()</span>
<a name="l00374"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o8">00374</a>   <span class="keywordtype">double</span> <a class="code" href="classcatalog_access_1_1_catalog.html#o8">m_posErrSys</a>;
<a name="l00375"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o9">00375</a>   <span class="keywordtype">double</span> <a class="code" href="classcatalog_access_1_1_catalog.html#o9">m_posErrFactor</a>;
00376 
<a name="l00377"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o10">00377</a>   std::vector&lt;Quantity&gt; <a class="code" href="classcatalog_access_1_1_catalog.html#o10">m_quantities</a>;      <span class="comment">// the definition of the catalog</span>
<a name="l00378"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o11">00378</a>   std::vector&lt;bool&gt;     <a class="code" href="classcatalog_access_1_1_catalog.html#o11">m_loadQuantity</a>;    <span class="comment">// which quantities to load ?</span>
00379 
<a name="l00380"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o12">00380</a>   std::vector&lt;std::vector&lt;std::string&gt; &gt; <a class="code" href="classcatalog_access_1_1_catalog.html#o12">m_strings</a>;
00381       <span class="comment">// stores all string contents of the catalog;</span>
00382       <span class="comment">// e.g. m_strings[3] gives you the vector containing</span>
00383       <span class="comment">// the values of quantity 3 from the catalog;</span>
00384       <span class="comment">// m_strings[3][25] gives you the value of quantity 3 for catalog entry 25</span>
00385 
00386   <span class="comment">// comment: the number string quantities in the catalog == m_strings.size()</span>
00387 
<a name="l00388"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o13">00388</a>   std::vector&lt;std::vector&lt;double&gt; &gt; <a class="code" href="classcatalog_access_1_1_catalog.html#o13">m_numericals</a>;
00389       <span class="comment">// stores all numerical contents of the catalog</span>
00390 
00391   <span class="comment">// comment: the number of numerical quantities == m_numericals.size()</span>
00392 
<a name="l00393"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o14">00393</a>   <span class="keywordtype">long</span> <a class="code" href="classcatalog_access_1_1_catalog.html#o14">m_numOriRows</a>;            <span class="comment">// maximal number of rows in CDS catalog</span>
<a name="l00394"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o15">00394</a>   <span class="keywordtype">long</span> <a class="code" href="classcatalog_access_1_1_catalog.html#o15">m_numReadRows</a>;           <span class="comment">// maximal number of rows user reads in file</span>
<a name="l00395"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o16">00395</a>   <span class="keywordtype">long</span> <a class="code" href="classcatalog_access_1_1_catalog.html#o16">m_numRows</a>;
00396       <span class="comment">// number of catalog rows loaded into memory</span>
00397       <span class="comment">// ( == m_strings[0].size() if m_strings.size() != 0 which should always</span>
00398       <span class="comment">//   be true due to the existence of generic quantities )</span>
00399       <span class="comment">// ( also == m_numericals[0].size if m_numericals.size != 0 which should</span>
00400       <span class="comment">//   always be true due to the existence of generic quantities )</span>
00401 
<a name="l00402"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o17">00402</a>   std::vector&lt;std::vector&lt;unsigned long&gt; &gt; <a class="code" href="classcatalog_access_1_1_catalog.html#o17">m_rowIsSelected</a>; 
00403       <span class="comment">// false by default, i.e. all bits to 0;</span>
00404       <span class="comment">// each vector column has m_numRows elements; for a given row:</span>
00405       <span class="comment">// first bit to 1 if all selection criteria are met</span>
00406       <span class="comment">// each following bits for one quantity criteria</span>
00407 
<a name="l00408"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o18">00408</a>   std::string <a class="code" href="classcatalog_access_1_1_catalog.html#o18">m_selection</a>;      <span class="comment">// to contain a general cut which is parsed</span>
00409                                 <span class="comment">// by the method setCutString()</span>
<a name="l00410"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o19">00410</a>   <span class="keywordtype">bool</span> <a class="code" href="classcatalog_access_1_1_catalog.html#o19">m_criteriaORed</a>;
00411       <span class="comment">// if true: OR instead of AND between bits of m_rowIsSelected</span>
00412 
<a name="l00413"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o20">00413</a>   <span class="keywordtype">bool</span> <a class="code" href="classcatalog_access_1_1_catalog.html#o20">m_selRegion</a>;
00414       <span class="comment">// true if an elliptical region is to be selected;</span>
00415       <span class="comment">// default == false</span>
<a name="l00416"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o21">00416</a>   <span class="keywordtype">double</span> <a class="code" href="classcatalog_access_1_1_catalog.html#o21">m_selEllipseCentRA_deg</a>;
00417       <span class="comment">// the RA of the center of the ellipse (degrees)</span>
<a name="l00418"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o22">00418</a>   <span class="keywordtype">double</span> <a class="code" href="classcatalog_access_1_1_catalog.html#o22">m_selEllipseCentDEC_deg</a>;
00419       <span class="comment">// the DEC of the center of the ellipse (degrees)</span>
<a name="l00420"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o23">00420</a>   <span class="keywordtype">double</span> <a class="code" href="classcatalog_access_1_1_catalog.html#o23">m_selEllipseMinAxis_deg</a>;
00421       <span class="comment">// the size of the minor axis (degrees)</span>
<a name="l00422"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o24">00422</a>   <span class="keywordtype">double</span> <a class="code" href="classcatalog_access_1_1_catalog.html#o24">m_selEllipseMajAxis_deg</a>;
00423       <span class="comment">// the size of the major axis (degrees)</span>
<a name="l00424"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o25">00424</a>   <span class="keywordtype">double</span> <a class="code" href="classcatalog_access_1_1_catalog.html#o25">m_selEllipseRot_deg</a>;
00425       <span class="comment">// the rotation angle, i.e. the angle between major axis and the</span>
00426       <span class="comment">// celestial equator (degrees); default == 0</span>
00427 
00428   <span class="comment">// following four data members needed for efficient selection</span>
<a name="l00429"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o26">00429</a>   <span class="keywordtype">long</span> <a class="code" href="classcatalog_access_1_1_catalog.html#o26">m_numSelRows</a>;            <span class="comment">// for quick test: 0 = nothing selected</span>
<a name="l00430"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o27">00430</a>   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#o27">m_indexErr</a>;               <span class="comment">// index for position error in Quantity vector</span>
<a name="l00431"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o28">00431</a>   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#o28">m_indexRA</a>;                <span class="comment">// index for RA  in Quantity vector</span>
<a name="l00432"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o29">00432</a>   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#o29">m_indexDEC</a>;               <span class="comment">// index for DEC in Quantity vector</span>
<a name="l00433"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o30">00433</a>   std::vector&lt;double&gt; <a class="code" href="classcatalog_access_1_1_catalog.html#o30">m_selEllipse</a>;
00434       <span class="comment">// the sinus and cosinus of the 2 spherical angles + ellipse size</span>
00435 
00436   <span class="keywordtype">void</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c0">deleteDescription</a>();
00437       <span class="comment">// erase the changes made by "importDescription"</span>
00438       <span class="comment">// must call first "deleteContent" if "import" or "importSelected" done</span>
00439   <span class="keywordtype">void</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c1">deleteQuantities</a>();
00440       <span class="comment">// erase elements in m_quantities according to m_loadQuantity,</span>
00441       <span class="comment">// deleteContent() MUST be done before</span>
00442 
00443   <span class="keywordtype">bool</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c2">checkRegion</a>(<span class="keyword">const</span> <span class="keywordtype">long</span> row, <span class="keyword">const</span> <span class="keywordtype">int</span> nRA, <span class="keyword">const</span> <span class="keywordtype">int</span> nDEC);
00444       <span class="comment">// check if given row is inside the elliptical region,</span>
00445       <span class="comment">// nRA and nDEC are the position inside m_numericals.</span>
00446   <span class="keywordtype">bool</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c3">checkNUM</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> r, <span class="keyword">const</span> <span class="keywordtype">int</span> index, <span class="keyword">const</span> <span class="keywordtype">bool</span> miss,
00447                 <span class="keyword">const</span> <span class="keywordtype">bool</span> reject, <span class="keyword">const</span> <span class="keywordtype">double</span> precis);
00448       <span class="comment">// check if value pass criteria for given quantity index (cut AND list)</span>
00449   <span class="keywordtype">bool</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c4">checkNUMor</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> r, <span class="keyword">const</span> <span class="keywordtype">int</span> index,
00450                   <span class="keyword">const</span> <span class="keywordtype">bool</span> reject, <span class="keyword">const</span> <span class="keywordtype">double</span> precis);
00451       <span class="comment">// check if value pass criteria for given quantity index (cut OR list)</span>
00452   <span class="keywordtype">bool</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c5">rowSelect</a>(<span class="keyword">const</span> <span class="keywordtype">long</span> row, <span class="keyword">const</span> std::vector&lt;bool&gt; &amp;quantSel);
00453       <span class="comment">// compute the global row selection from bits in m_rowIsSelected</span>
00454   <span class="keywordtype">void</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a49">unsetCuts</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> index);
00455       <span class="comment">// unset cut on quantity found by its existing index</span>
00456 
00457   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c7">doSelS</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> <span class="keywordtype">int</span> index, <span class="keyword">const</span> <span class="keywordtype">int</span> code,
00458              <span class="keyword">const</span> std::vector&lt;std::string&gt; &amp;list, <span class="keyword">const</span> <span class="keywordtype">bool</span> exact);
00459       <span class="comment">// select rows depending on the given string list</span>
00460   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c8">doSelN</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> <span class="keywordtype">int</span> index, <span class="keyword">const</span> <span class="keywordtype">int</span> code,
00461              <span class="keyword">const</span> std::vector&lt;double&gt; &amp;listVal);
00462       <span class="comment">// select rows depending on the given numerical list</span>
00463 
00464   <span class="keywordtype">void</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c9">setPosErrFactor</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> index);
00465       <span class="comment">// called by setGeneric() to set m_posErrFactor</span>
00466   <span class="keywordtype">void</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c10">setGeneric</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> whichCat);
00467       <span class="comment">// called just after "import..." to set m_isGeneric, m_index*</span>
00468   <span class="keywordtype">void</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c11">create_tables</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> nbQuantAscii);
00469       <span class="comment">// creates a new column in m_strings, m_numericals</span>
00470   <span class="keywordtype">void</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c12">add_rows</a>();
00471       <span class="comment">// creates a new row in m_strings, m_numericals</span>
00472   <span class="keywordtype">void</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c13">translate_cell</a>(std::string mot, <span class="keyword">const</span> <span class="keywordtype">int</span> index);
00473       <span class="comment">// loads one quantity at last row (m_numRows);</span>
00474 
00475   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c14">analyze_fits</a>(<span class="keyword">const</span> tip::Table *myDOL, <span class="keyword">const</span> <span class="keywordtype">bool</span> getDescr,
00476                    <span class="keyword">const</span> std::string origin);
00477   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c15">analyze_head</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> *tot, <span class="keywordtype">int</span> *what, <span class="keywordtype">bool</span> *testCR);
00478   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c16">analyze_body</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> *tot, <span class="keywordtype">int</span> *what, <span class="keyword">const</span> <span class="keywordtype">bool</span> testCR,
00479                    <span class="keyword">const</span> <span class="keywordtype">bool</span> getDescr);
00480       <span class="comment">// 3 methods read file for import or importDescription (getDescr=true)</span>
00481       <span class="comment">// returns IS_OK for completion, otherwise strictly negative number</span>
00482 
00483   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c17">load</a>(<span class="keyword">const</span> std::string &amp;fileName, <span class="keyword">const</span> std::string ext,
00484            <span class="keyword">const</span> <span class="keywordtype">bool</span> getDescr);
00485       <span class="comment">// common code between import and importDescription</span>
00486   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c18">loadWeb</a>(<span class="keyword">const</span> std::string catName, <span class="keyword">const</span> std::string urlCode,
00487               <span class="keyword">const</span> std::string &amp;fileName, <span class="keyword">const</span> <span class="keywordtype">long</span> maxRow);
00488       <span class="comment">// common code between importWeb and importDescriptionWeb</span>
00489   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c19">loadSelected</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> *tot);
00490       <span class="comment">// code for ASCII file importSelected()</span>
00491  
00492   <span class="comment">// inline private methods</span>
00493 
00494   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c20">checkImport</a>(<span class="keyword">const</span> std::string origin, <span class="keyword">const</span> <span class="keywordtype">bool</span> isDone);
00495       <span class="comment">// return -1 or -2 if problem, 0 or positive number otherwise</span>
00496       <span class="comment">// if isDone is true, cannot return 0=IS_VOID</span>
00497       <span class="comment">// if isDone is true and import is done, return m_quantities.size</span>
00498       <span class="comment">// if isDone is false and import NOT done, return 0</span>
00499   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c21">checkCatName</a>(<span class="keyword">const</span> std::string origin, <span class="keyword">const</span> std::string catName);
00500       <span class="comment">// return -3 if catName do not exist, its index otherwise</span>
00501   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c22">checkSize_row</a>(<span class="keyword">const</span> std::string origin, <span class="keyword">const</span> <span class="keywordtype">long</span> row);
00502       <span class="comment">// return strictly positive number (m_numRows) if row exist</span>
00503   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c23">checkQuant_name</a>(<span class="keyword">const</span> std::string origin, <span class="keyword">const</span> std::string name);
00504       <span class="comment">// return negative number if problem, quantity index otherwise</span>
00505   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c24">checkSel_row</a>(<span class="keyword">const</span> std::string origin, <span class="keyword">const</span> <span class="keywordtype">long</span> srow);
00506       <span class="comment">// return strictly positive number (m_numSelRows) if selected row exist</span>
00507 
00508   <span class="keywordtype">bool</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c25">existCriteria</a>(std::vector&lt;bool&gt; *quantSel);
00509       <span class="comment">// return true if at least one criteria or selection region exist</span>
00510   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c26">bitPosition</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> index, <span class="keywordtype">int</span> *k);
00511       <span class="comment">// return long int to test m_quantities[index] bit in m_rowIsSelected[k]</span>
00512 
00513   <span class="comment">// constant members</span>
00514   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classcatalog_access_1_1_catalog.html#r0">s_CatalogURL</a>[<a class="code" href="catalog_8h.html#a2">MAX_URL</a>];
00515   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classcatalog_access_1_1_catalog.html#r1">s_CatalogList</a>[2*<a class="code" href="catalog_8h.html#a0">MAX_CAT</a>];
00516   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classcatalog_access_1_1_catalog.html#r2">s_CatalogGeneric</a>[<a class="code" href="catalog_8h.html#a0">MAX_CAT</a>][<a class="code" href="catalog_8h.html#a1">MAX_GEN</a>];
00517   <span class="keyword">static</span> <span class="keyword">const</span> std::string <a class="code" href="classcatalog_access_1_1_catalog.html#r3">s_genericL</a>;
00518   <span class="keyword">static</span> <span class="keyword">const</span> std::string <a class="code" href="classcatalog_access_1_1_catalog.html#r4">s_genericB</a>;
00519 
00520 }; <span class="comment">// end top class definition</span>
00521 
00522 
00523 <span class="comment">/**********************************************************************/</span>
00524 <span class="comment">/*  DEFINING inline FUNCTION MEMBERS                                  */</span>
00525 <span class="comment">/**********************************************************************/</span>
00526 
00527 <span class="comment">// Default constructor</span>
<a name="l00528"></a><a class="code" href="classcatalog_access_1_1_catalog.html#a0">00528</a> <span class="keyword">inline</span> Catalog::Catalog() {
00529 
00530 
00531   <a class="code" href="classcatalog_access_1_1_catalog.html#o0">m_code</a>=<span class="stringliteral">""</span>;
00532   <a class="code" href="classcatalog_access_1_1_catalog.html#o1">m_URL</a> =<span class="stringliteral">""</span>;
00533   <a class="code" href="classcatalog_access_1_1_catalog.html#o2">m_catName</a>   =<span class="stringliteral">""</span>;
00534   <a class="code" href="classcatalog_access_1_1_catalog.html#o3">m_catRef</a>    =<span class="stringliteral">""</span>;
00535   <a class="code" href="classcatalog_access_1_1_catalog.html#o4">m_tableName</a> =<span class="stringliteral">""</span>;
00536   <a class="code" href="classcatalog_access_1_1_catalog.html#o5">m_tableRef</a>  =<span class="stringliteral">""</span>;
00537   <a class="code" href="classcatalog_access_1_1_catalog.html#o7">m_filePos</a>   =0;
00538   <a class="code" href="classcatalog_access_1_1_catalog.html#o8">m_posErrSys</a> = -1.0;
00539   <a class="code" href="classcatalog_access_1_1_catalog.html#o9">m_posErrFactor</a>=1.0;  <span class="comment">// "deg" by default</span>
00540 
00541   <a class="code" href="classcatalog_access_1_1_catalog.html#o16">m_numRows</a>   =<a class="code" href="namespacecatalog_access.html#a34a13">IMPORT_NEED</a>;
00542   <a class="code" href="classcatalog_access_1_1_catalog.html#o14">m_numOriRows</a>=0;
00543   <a class="code" href="classcatalog_access_1_1_catalog.html#o15">m_numReadRows</a>=0;
00544   <a class="code" href="classcatalog_access_1_1_catalog.html#o18">m_selection</a> =<span class="stringliteral">""</span>;
00545   <a class="code" href="classcatalog_access_1_1_catalog.html#o19">m_criteriaORed</a>=<span class="keyword">false</span>;
00546   <a class="code" href="classcatalog_access_1_1_catalog.html#o20">m_selRegion</a> =<span class="keyword">false</span>;
00547   <span class="comment">// following four data members needed for efficient selection</span>
00548   <a class="code" href="classcatalog_access_1_1_catalog.html#o26">m_numSelRows</a>=0;
00549   <a class="code" href="classcatalog_access_1_1_catalog.html#o27">m_indexErr</a>= -1;
00550   <a class="code" href="classcatalog_access_1_1_catalog.html#o28">m_indexRA</a> = -1;
00551   <a class="code" href="classcatalog_access_1_1_catalog.html#o29">m_indexDEC</a>= -1;
00552   <span class="keywordflow">try</span> { <a class="code" href="classcatalog_access_1_1_catalog.html#o30">m_selEllipse</a>.assign(7, 0.0); }
00553   <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception &amp;err) {
00554     std::string errText;
00555     errText=std::string(<span class="stringliteral">"EXCEPTION on creating m_selEllipse: "</span>)+err.what();
00556     <a class="code" href="namespacecatalog_access.html#a31">printErr</a>(<span class="stringliteral">"Catalog constructor"</span>, errText);
00557     <span class="keywordflow">throw</span>;
00558   }
00559   <a class="code" href="namespacecatalog_access.html#a4">verbosity</a>=3;
00560 <span class="preprocessor">  #ifdef DEBUG_CAT</span>
00561 <span class="preprocessor"></span>  std::cout &lt;&lt; <span class="stringliteral">"!! DEBUG Catalog constructor (sizes="</span> &lt;&lt;  <a class="code" href="classcatalog_access_1_1_catalog.html#o10">m_quantities</a>.size()
00562             &lt;&lt;<span class="stringliteral">","</span>&lt;&lt; <a class="code" href="classcatalog_access_1_1_catalog.html#o12">m_strings</a>.size() &lt;&lt;<span class="stringliteral">","</span>&lt;&lt; <a class="code" href="classcatalog_access_1_1_catalog.html#o13">m_numericals</a>.size() &lt;&lt;<span class="stringliteral">","</span>
00563             &lt;&lt; <a class="code" href="classcatalog_access_1_1_catalog.html#o17">m_rowIsSelected</a>.size() &lt;&lt;<span class="stringliteral">", m_selEllipse "</span>&lt;&lt; <a class="code" href="classcatalog_access_1_1_catalog.html#o30">m_selEllipse</a>.size()
00564             &lt;&lt; <span class="stringliteral">")"</span> &lt;&lt; std::endl;
00565 <span class="preprocessor">  #endif</span>
00566 <span class="preprocessor"></span>}
00567 
00568 <span class="comment">/**********************************************************************/</span>
00569 <span class="comment">// Destructor needed to free memory</span>
<a name="l00570"></a><a class="code" href="classcatalog_access_1_1_catalog.html#a1">00570</a> <span class="keyword">inline</span> Catalog::~Catalog() {
00571 
00572 <span class="preprocessor">  #ifdef DEBUG_CAT</span>
00573 <span class="preprocessor"></span>  std::cout &lt;&lt; <span class="stringliteral">"!! DEBUG Catalog destructor on: "</span>
00574             &lt;&lt; <a class="code" href="classcatalog_access_1_1_catalog.html#o4">m_tableName</a> &lt;&lt; std::endl;
00575 <span class="preprocessor">  #endif</span>
00576 <span class="preprocessor"></span>  <a class="code" href="classcatalog_access_1_1_catalog.html#a20">deleteContent</a>();
00577   <a class="code" href="classcatalog_access_1_1_catalog.html#c0">deleteDescription</a>();
00578 }
00579 
00580 <span class="comment">/**********************************************************************/</span>
00581 <span class="comment">// check if import or importDescription already done</span>
<a name="l00582"></a><a class="code" href="classcatalog_access_1_1_catalog.html#c20">00582</a> <span class="keyword">inline</span> <span class="keywordtype">int</span> Catalog::checkImport(<span class="keyword">const</span> std::string origin, <span class="keyword">const</span> <span class="keywordtype">bool</span> isDone) {
00583 
00584   <span class="keywordtype">int</span> quantSize=<a class="code" href="classcatalog_access_1_1_catalog.html#o10">m_quantities</a>.size();
00585   <span class="keywordflow">if</span> (quantSize &gt; 0) {
00586     <span class="keywordflow">if</span> (isDone) <span class="keywordflow">return</span> quantSize;
00587     <span class="keywordflow">if</span> (<a class="code" href="classcatalog_access_1_1_catalog.html#o16">m_numRows</a> &lt;= 0) {
00588       <a class="code" href="namespacecatalog_access.html#a33">printLog</a>(2, <span class="stringliteral">"deleting previous Catalog description"</span>);
00589       <a class="code" href="classcatalog_access_1_1_catalog.html#c0">deleteDescription</a>();
00590       <span class="keywordflow">return</span> <a class="code" href="namespacecatalog_access.html#a34a11">IS_VOID</a>;
00591     }
00592     <a class="code" href="namespacecatalog_access.html#a32">printWarn</a>(origin, <span class="stringliteral">"call 'deleteContent' before importing again"</span>);
00593     <span class="keywordflow">return</span> <a class="code" href="namespacecatalog_access.html#a34a12">IMPORT_BIS</a>;
00594   }
00595   <span class="keywordflow">else</span> {
00596     <span class="keywordflow">if</span> (! isDone) <span class="keywordflow">return</span> <a class="code" href="namespacecatalog_access.html#a34a11">IS_VOID</a>;
00597     <a class="code" href="namespacecatalog_access.html#a32">printWarn</a>(origin, <span class="stringliteral">"must first use one 'import' method"</span>);
00598     <span class="keywordflow">return</span> <a class="code" href="namespacecatalog_access.html#a34a13">IMPORT_NEED</a>;
00599   }
00600 }
00601 
00602 <span class="comment">/**********************************************************************/</span>
00603 <span class="comment">// check if catName is valid </span>
<a name="l00604"></a><a class="code" href="classcatalog_access_1_1_catalog.html#c21">00604</a> <span class="keyword">inline</span> <span class="keywordtype">int</span> Catalog::checkCatName(<span class="keyword">const</span> std::string origin,
00605                                  <span class="keyword">const</span> std::string catName) {
00606 
00607   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="catalog_8h.html#a0">MAX_CAT</a>; i++) {
00608     <span class="keywordflow">if</span> (Catalog::s_CatalogList[2*i] == catName) <span class="keywordflow">return</span> i;
00609   }
00610   std::string errText;
00611   errText=<span class="stringliteral">"given Catalog name ("</span>+catName+<span class="stringliteral">") do not exist"</span>;
00612   <a class="code" href="namespacecatalog_access.html#a32">printWarn</a>(origin, errText);
00613   <span class="keywordflow">return</span> <a class="code" href="namespacecatalog_access.html#a34a14">BAD_CATNAME</a>;
00614 }
00615 
00616 <span class="comment">/**********************************************************************/</span>
00617 <span class="comment">// check if catalog was succesfully loaded and row exist</span>
<a name="l00618"></a><a class="code" href="classcatalog_access_1_1_catalog.html#c22">00618</a> <span class="keyword">inline</span> <span class="keywordtype">int</span> Catalog::checkSize_row(<span class="keyword">const</span> std::string origin, <span class="keyword">const</span> <span class="keywordtype">long</span> row) {
00619 
00620   <span class="keywordflow">if</span> (<a class="code" href="classcatalog_access_1_1_catalog.html#o16">m_numRows</a> &lt;= 0) {
00621     <a class="code" href="namespacecatalog_access.html#a32">printWarn</a>(origin, <span class="stringliteral">"catalog is empty"</span>);
00622     <span class="keywordflow">return</span> <a class="code" href="namespacecatalog_access.html#a34a11">IS_VOID</a>;
00623   }
00624   <span class="keywordflow">if</span> ((row &lt; 0) || (row &gt;= <a class="code" href="classcatalog_access_1_1_catalog.html#o16">m_numRows</a>)) {
00625     std::ostringstream sortie;
00626     sortie &lt;&lt; <span class="stringliteral">"row must be within [ 0, "</span> &lt;&lt; <a class="code" href="classcatalog_access_1_1_catalog.html#o16">m_numRows</a>-1 &lt;&lt; <span class="stringliteral">"]"</span>;
00627     <a class="code" href="namespacecatalog_access.html#a32">printWarn</a>(origin, sortie.str());
00628     <span class="keywordflow">return</span> <a class="code" href="namespacecatalog_access.html#a34a21">BAD_ROW</a>;
00629   }
00630   <span class="keywordflow">return</span> <a class="code" href="classcatalog_access_1_1_catalog.html#o16">m_numRows</a>;
00631 }
00632 
00633 <span class="comment">/**********************************************************************/</span>
00634 <span class="comment">// check if quantity name is valid</span>
<a name="l00635"></a><a class="code" href="classcatalog_access_1_1_catalog.html#c23">00635</a> <span class="keyword">inline</span> <span class="keywordtype">int</span> Catalog::checkQuant_name(<span class="keyword">const</span> std::string origin,
00636                                     <span class="keyword">const</span> std::string name) {
00637 
00638   <span class="keywordtype">int</span> quantSize=<a class="code" href="classcatalog_access_1_1_catalog.html#o10">m_quantities</a>.size();
00639   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;quantSize; i++) {
00640     <span class="keywordflow">if</span> (<a class="code" href="classcatalog_access_1_1_catalog.html#o10">m_quantities</a>[i].m_name == name) <span class="keywordflow">return</span> i;
00641   }
00642   std::string errText;
00643   errText=<span class="stringliteral">"given Quantity name ("</span>+name+<span class="stringliteral">") do not exist"</span>;
00644   <a class="code" href="namespacecatalog_access.html#a32">printWarn</a>(origin, errText);
00645   <span class="keywordflow">return</span> <a class="code" href="namespacecatalog_access.html#a34a22">BAD_QUANT_NAME</a>;
00646 }
00647 
00648 <span class="comment">/**********************************************************************/</span>
00649 <span class="comment">// check if catalog was succesfully loaded and selected row exist</span>
<a name="l00650"></a><a class="code" href="classcatalog_access_1_1_catalog.html#c24">00650</a> <span class="keyword">inline</span> <span class="keywordtype">int</span> Catalog::checkSel_row(<span class="keyword">const</span> std::string origin, <span class="keyword">const</span> <span class="keywordtype">long</span> srow) {
00651 
00652   <span class="keywordflow">if</span> (<a class="code" href="classcatalog_access_1_1_catalog.html#o16">m_numRows</a> &lt;= 0) {
00653     <a class="code" href="namespacecatalog_access.html#a32">printWarn</a>(origin, <span class="stringliteral">"catalog is empty"</span>);
00654     <span class="keywordflow">return</span> <a class="code" href="namespacecatalog_access.html#a34a11">IS_VOID</a>;
00655   }
00656   <span class="keywordflow">if</span> (<a class="code" href="classcatalog_access_1_1_catalog.html#o26">m_numSelRows</a> == 0) {
00657     <a class="code" href="namespacecatalog_access.html#a32">printWarn</a>(origin, <span class="stringliteral">"no row is selected"</span>);
00658     <span class="keywordflow">return</span> <a class="code" href="namespacecatalog_access.html#a34a11">IS_VOID</a>;
00659   }
00660   <span class="keywordflow">if</span> ((srow &lt; 0) || (srow &gt;= <a class="code" href="classcatalog_access_1_1_catalog.html#o26">m_numSelRows</a>)) {
00661     std::ostringstream sortie;
00662     sortie &lt;&lt; <span class="stringliteral">"row must be within [ 0, "</span> &lt;&lt; <a class="code" href="classcatalog_access_1_1_catalog.html#o26">m_numSelRows</a>-1 &lt;&lt; <span class="stringliteral">"]"</span>;
00663     <a class="code" href="namespacecatalog_access.html#a32">printWarn</a>(origin, sortie.str());
00664     <span class="keywordflow">return</span> <a class="code" href="namespacecatalog_access.html#a34a21">BAD_ROW</a>;
00665   }
00666   <span class="keywordflow">return</span> <a class="code" href="classcatalog_access_1_1_catalog.html#o26">m_numSelRows</a>;
00667 }
00668 
00669 <span class="comment">/**********************************************************************/</span>
00670 <span class="comment">// return true if at least one criteria or selection region exist</span>
<a name="l00671"></a><a class="code" href="classcatalog_access_1_1_catalog.html#c25">00671</a> <span class="keyword">inline</span> <span class="keywordtype">bool</span> Catalog::existCriteria(std::vector&lt;bool&gt; *quantSel) {
00672 
00673   <span class="keywordtype">bool</span> all=<span class="keyword">false</span>;
00674   std::vector&lt;Quantity&gt;::const_iterator itQ;
00675   quantSel-&gt;clear();
00676   <span class="keywordflow">try</span> {
00677     <span class="keywordflow">if</span> (!<a class="code" href="classcatalog_access_1_1_catalog.html#o20">m_selRegion</a>) quantSel-&gt;push_back(<span class="keyword">false</span>);
00678     <span class="keywordflow">else</span> { all=<span class="keyword">true</span>;  quantSel-&gt;push_back(<span class="keyword">true</span>); }
00679     <span class="keywordflow">for</span> (itQ=<a class="code" href="classcatalog_access_1_1_catalog.html#o10">m_quantities</a>.begin(); itQ != <a class="code" href="classcatalog_access_1_1_catalog.html#o10">m_quantities</a>.end(); itQ++) {
00680 
00681       <span class="keywordflow">if</span> (itQ-&gt;m_type == Quantity::STRING) {
00682         <span class="keywordflow">if</span> (itQ-&gt;m_listValS.size() &gt; 0) {
00683           all=<span class="keyword">true</span>;
00684           quantSel-&gt;push_back(<span class="keyword">true</span>);
00685         }
00686         <span class="keywordflow">else</span> quantSel-&gt;push_back(<span class="keyword">false</span>);
00687       }
00688 
00689       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (itQ-&gt;m_type == Quantity::NUM) {
00690         <span class="keywordflow">if</span> ( (itQ-&gt;m_lowerCut &lt; <a class="code" href="quantity_8h.html#a0">NO_SEL_CUT</a>)||(itQ-&gt;m_upperCut &lt; <a class="code" href="quantity_8h.html#a0">NO_SEL_CUT</a>)
00691             || (itQ-&gt;m_listValN.size() &gt; 0) ) {
00692           all=<span class="keyword">true</span>;
00693           quantSel-&gt;push_back(<span class="keyword">true</span>);
00694         }
00695         <span class="keywordflow">else</span> quantSel-&gt;push_back(<span class="keyword">false</span>);
00696       }
00697 
00698       <span class="keywordflow">else</span> quantSel-&gt;push_back(<span class="keyword">false</span>);
00699       <span class="comment">// VECTOR quantity are selected by the quantities in m_vectorQs</span>
00700 
00701     }<span class="comment">// loop on quantities</span>
00702   }
00703   <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception &amp;err) {
00704     std::string errText=std::string(<span class="stringliteral">"EXCEPTION on boolean vector: "</span>)+err.what();
00705     <a class="code" href="namespacecatalog_access.html#a31">printErr</a>(<span class="stringliteral">"private existCriteria"</span>, errText);
00706     <span class="keywordflow">throw</span>;
00707   }
00708   <span class="keywordflow">return</span> all;
00709 }
00710 
00711 <span class="comment">/**********************************************************************/</span>
00712 <span class="comment">// return long int to test m_quantities[index] bit in m_rowIsSelected[k]</span>
<a name="l00713"></a><a class="code" href="classcatalog_access_1_1_catalog.html#c26">00713</a> <span class="keyword">inline</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> Catalog::bitPosition(<span class="keyword">const</span> <span class="keywordtype">int</span> index, <span class="keywordtype">int</span> *k) {
00714 
00715   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> test=1ul;
00716   <span class="keywordtype">int</span> pos=index+1; <span class="comment">// position of given criteria in isSelected vector</span>
00717   *k=(pos+1)/(<span class="keyword">sizeof</span>(long)*8);
00718   <span class="comment">// index of m_rowIsSelected with given criteria</span>
00719   <span class="keywordtype">int</span> i=pos+1-(*k)*<span class="keyword">sizeof</span>(long)*8;
00720   <span class="comment">// bit pos.of given criteria in m_rowIsSelected[k]</span>
00721   <span class="keywordtype">int</span> j=0;
00722   <span class="keywordflow">while</span> (j &lt; i) {test*=2ul; j++;}
00723 
00724   <span class="keywordflow">return</span> test;
00725 }
00726 
00727 } <span class="comment">// namespace catalogAccess</span>
00728 <span class="preprocessor">#endif // catalogAccess_cat_h</span>
</pre></div><hr><address style="align: right;"><small>Generated on Fri Jun 10 14:51:22 2005 for catalogAccess by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.18 </small></address>
</body>
</html>
