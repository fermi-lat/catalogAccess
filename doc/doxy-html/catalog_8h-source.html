<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>catalog.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.18 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>catalog.h</h1><a href="catalog_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 
00011 <span class="preprocessor">#ifndef catalogAccess_cat_h</span>
00012 <span class="preprocessor"></span><span class="preprocessor">#define catalogAccess_cat_h</span>
00013 <span class="preprocessor"></span>
00014 <span class="preprocessor">#include "tip/IFileSvc.h"</span>
00015 <span class="preprocessor">#include "tip/Table.h"</span>
00016 <span class="preprocessor">#include "<a class="code" href="quantity_8h.html">quantity.h</a>"</span>
00017 <span class="comment">// can compile without first three</span>
00018 <span class="comment">//#include &lt;cctype&gt;      //for toupper, tolower</span>
00019 <span class="comment">//#include &lt;algorithm&gt;   //for transform</span>
00020 <span class="comment">//#include &lt;cstdio&gt;      //for sprintf</span>
00021 <span class="preprocessor">#include &lt;fstream&gt;</span>    <span class="comment">//for ifstream, ofstream</span>
00022 <span class="comment">//#include &lt;dirent.h&gt;   //for DIR type </span>
00023 <span class="preprocessor">#include &lt;iomanip&gt;</span>    <span class="comment">//for setprecision, _Ios_Fmtflags, ...</span>
00024 <span class="preprocessor">#include &lt;stdexcept&gt;</span>  <span class="comment">//for std::runtime_error</span>
00025 
<a name="l00026"></a><a class="code" href="catalog_8h.html#a0">00026</a> <span class="preprocessor">#define MAX_CAT 10              // number of known catalogs</span>
<a name="l00027"></a><a class="code" href="catalog_8h.html#a1">00027</a> <span class="preprocessor"></span><span class="preprocessor">#define MAX_GEN  6              // number of generic quantities</span>
<a name="l00028"></a><a class="code" href="catalog_8h.html#a2">00028</a> <span class="preprocessor"></span><span class="preprocessor">#define MAX_URL  9              // number of known VizieR web address</span>
<a name="l00029"></a><a class="code" href="catalog_8h.html#a3">00029</a> <span class="preprocessor"></span><span class="preprocessor">#define MAX_LINE 1025           // (maximum number of char)+1 with getline</span>
00030 <span class="preprocessor"></span><span class="keyword">namespace </span>catalogAccess {
00031 
<a name="l00044"></a><a class="code" href="classcatalog_access_1_1_catalog.html">00044</a> <span class="keyword">class </span><a class="code" href="classcatalog_access_1_1_catalog.html">Catalog</a> {
00045 
00046 <span class="keyword">public</span>:
00047 
00048   <a class="code" href="classcatalog_access_1_1_catalog.html#a0">Catalog</a>();                    <span class="comment">// Default constructor</span>
00049   <a class="code" href="classcatalog_access_1_1_catalog.html#a1">~Catalog</a>();                   <span class="comment">// Destructor needed to free memory</span>
00050   <a class="code" href="classcatalog_access_1_1_catalog.html#a0">Catalog</a>(<span class="keyword">const</span> <a class="code" href="classcatalog_access_1_1_catalog.html">Catalog</a> &amp; );    <span class="comment">// Copy constructor needed</span>
00051 
00052 
00053   <span class="comment">// Methods giving general information</span>
00054   <span class="comment">//-----------------------------------</span>
00055 
00056   <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classcatalog_access_1_1_catalog.html#d0">getCatList</a>(std::vector&lt;std::string&gt; *names,
00057                          <span class="keyword">const</span> <span class="keywordtype">bool</span> isCode=<span class="keyword">true</span>);
00058       <span class="comment">// return a list of all supported catalog names</span>
00059   <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classcatalog_access_1_1_catalog.html#d1">getWebList</a>(std::vector&lt;std::string&gt; *names,
00060                          <span class="keyword">const</span> <span class="keywordtype">bool</span> isCode=<span class="keyword">true</span>);
00061       <span class="comment">// return a list of all supported web site names</span>
00062 
00063   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a3">getMaxNumRows</a>(<span class="keywordtype">long</span> *nrows, <span class="keyword">const</span> std::string &amp;fileName);
00064   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a4">getMaxNumRowsWeb</a>(<span class="keywordtype">long</span> *nrows, <span class="keyword">const</span> std::string catName,
00065                        <span class="keyword">const</span> std::string urlCode=<span class="stringliteral">"cds"</span>); 
00066       <span class="comment">// to know the maximal number of rows in the file or in the CDS catalog </span>
00067 
00068 
00069   <span class="comment">// Methods for importing, saving, loading</span>
00070   <span class="comment">//---------------------------------------</span>
00071 
00072   <span class="keywordtype">long</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a5">getRAMsize</a>(<span class="keyword">const</span> <span class="keywordtype">long</span> numRows=44000, <span class="keyword">const</span> <span class="keywordtype">bool</span> writeLog=<span class="keyword">false</span>);
00073       <span class="comment">// return the number of RAM bytes needed for numRows catalog rows</span>
00074       <span class="comment">// if writeLog is true (as called by import below) write info in Log</span>
00075 
00076   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a6">importDescription</a>(<span class="keyword">const</span> std::string &amp;fileName, <span class="keyword">const</span> std::string ext=<span class="stringliteral">"1"</span>);
00077   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a7">importDescriptionWeb</a>(<span class="keyword">const</span> std::string catName,
00078                            <span class="keyword">const</span> std::string urlCode=<span class="stringliteral">"cds"</span>,
00079                            <span class="keyword">const</span> std::string &amp;fileName=<span class="stringliteral">""</span>);
00080       <span class="comment">// read only the catalog description (i.e. fill the</span>
00081       <span class="comment">// m_quantities vector and m_code, etc.)</span>
00082       <span class="comment">// the method returns the number of quantities,</span>
00083       <span class="comment">// -1 if importDescription already done, -3 if catName is unknown</span>
00084       <span class="comment">// other negative number for loading error</span>
00085 
00086 
00087   <span class="keywordtype">int</span> <span class="keyword">import</span>(<span class="keyword">const</span> std::string &amp;fileName, <span class="keyword">const</span> <span class="keywordtype">long</span> maxRow=0,
00088              <span class="keyword">const</span> std::string ext=<span class="stringliteral">"1"</span>);
00089   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a9">importWeb</a>(<span class="keyword">const</span> std::string catName, <span class="keyword">const</span> std::string urlCode=<span class="stringliteral">"cds"</span>,
00090                 <span class="keyword">const</span> <span class="keywordtype">long</span> maxRow=44000, <span class="keyword">const</span> std::string &amp;fileName=<span class="stringliteral">""</span>);
00091       <span class="comment">// import method for loading an entire catalog without selection</span>
00092       <span class="comment">// * recognizes catalog name and identifies the files to load</span>
00093       <span class="comment">// * translates the generic quantities</span>
00094       <span class="comment">// * loads non-generic quantities</span>
00095       <span class="comment">// the method returns the number of loaded rows,</span>
00096       <span class="comment">// -1 if successful import already done, -3 if catName is unknown,</span>
00097       <span class="comment">// other negative number for loading error</span>
00098 
00099   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a10">importSelected</a>();
00100       <span class="comment">// if a catalog description was already loaded, this method does</span>
00101       <span class="comment">// the same as import(). However, it applies selection criteria</span>
00102       <span class="comment">// such that quantities which are not passing the criteria are not </span>
00103       <span class="comment">// loaded;</span>
00104       <span class="comment">// the method returns the number of loaded rows,</span>
00105       <span class="comment">// -1 if successful import already done, -2 if importDescription not done</span>
00106       <span class="comment">// other negative number for loading error      </span>
00107 
00108   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a11">saveText</a>(<span class="keyword">const</span> std::string &amp;fileName, <span class="keywordtype">bool</span> clobber=<span class="keyword">false</span>);
00109       <span class="comment">// save the catalog information presently in memory to a text file</span>
00110       <span class="comment">// the method returns 1 if successful, negative number otherwise</span>
00111 
00112   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a12">saveSelectedText</a>(<span class="keyword">const</span> std::string &amp;fileName, <span class="keywordtype">bool</span> clobber=<span class="keyword">false</span>);
00113       <span class="comment">// like saveText(), however, storing only the selected rows</span>
00114       <span class="comment">// the method returns 1 if successful, negative number otherwise</span>
00115 
00116   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a13">saveFits</a>(<span class="keyword">const</span> std::string &amp;fileName, <span class="keyword">const</span> std::string &amp;extName,
00117                <span class="keywordtype">bool</span> clobber=<span class="keyword">false</span>, <span class="keywordtype">bool</span> append=<span class="keyword">false</span>);
00118       <span class="comment">// save the catalog information presently in memory to a FITS file</span>
00119       <span class="comment">// the method returns 1 if successful, negative number otherwise</span>
00120 
00121   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a14">saveSelectedFits</a>(<span class="keyword">const</span> std::string &amp;fileName, <span class="keyword">const</span> std::string &amp;extName,
00122                        <span class="keywordtype">bool</span> clobber=<span class="keyword">false</span>, <span class="keywordtype">bool</span> append=<span class="keyword">false</span>);
00123       <span class="comment">// like saveFits(), however, storing only the selected rows</span>
00124       <span class="comment">// the method returns 1 if successful, negative number otherwise</span>
00125 
00126 
00127   <span class="comment">// Methods for accessing data</span>
00128   <span class="comment">//---------------------------</span>
00129 
00130   <span class="comment">// accessing the Catalog definition</span>
00131 
00132   <span class="keywordtype">void</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a15">getCatalogTitles</a>(std::vector&lt;std::string&gt; *titles);
00133       <span class="comment">// get the 6 definition strings if vector size is enough</span>
00134       <span class="comment">// otherwise get only m_code (size 0 or 1) or m_URL, etc.</span>
00135 <span class="comment">/*  void getQuantityIter(std::vector&lt;Quantity&gt;::const_iterator *iter);*/</span>
00136       <span class="comment">// get an iterator on the quantities</span>
00137   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a16">getQuantityDescription</a>(std::vector&lt;Quantity&gt; *myQuantities);
00138       <span class="comment">// get a copy of the quantity vector</span>
00139   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a17">getQuantityNames</a>(std::vector&lt;std::string&gt; *names);  <span class="comment">// get only the names</span>
00140   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a18">getQuantityUnits</a>(std::vector&lt;std::string&gt; *units);  <span class="comment">// get only the units</span>
00141   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a19">getQuantityUCDs</a> (std::vector&lt;std::string&gt; *ucds);   <span class="comment">// get only the UCDs</span>
00142   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a20">getQuantityTypes</a>(std::vector&lt;Quantity::QuantityType&gt; *types);
00143       <span class="comment">// get only the types</span>
00144 
00145   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a21">getStatErrorName</a>(<span class="keyword">const</span> std::string name, std::string *statErrName);
00146       <span class="comment">// get the member "statErrName" of given quantity "name",</span>
00147       <span class="comment">// identifying the statistical error quantity</span>
00148   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a22">getSysErrorName</a>(<span class="keyword">const</span> std::string name, std::string *sysErrName);
00149       <span class="comment">// get the member "sysErrName" of given quantity "name",</span>
00150       <span class="comment">// identifying the systematic error quantity</span>
00151 <span class="comment">/*  int getVecQNames(const std::string name,</span>
00152 <span class="comment">                   std::vector&lt;std::string&gt; *vecNames);*/</span>
00153       <span class="comment">// get the list of the names of the quantities which</span>
00154       <span class="comment">// form the elements of the given VECTOR "name"</span>
00155 
00156 
00157   <span class="comment">// accessing all the Catalog contents in memory</span>
00158   <span class="comment">//       (ignoring in-memory selection criteria)</span>
00159 
00160 
00161   <span class="keywordtype">void</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a23">deleteContent</a>();
00162       <span class="comment">// erase m_strings, m_numericals but keep catalog definition</span>
00163 
00164   <span class="keywordtype">void</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a24">getNumRows</a>(<span class="keywordtype">long</span> *nrows);  <span class="comment">// get the number of rows in the catalog</span>
00165   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a25">getSValue</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> <span class="keywordtype">long</span> row, std::string *stringVal);
00166       <span class="comment">// get the value of the given string quantity "name"</span>
00167       <span class="comment">// in the given catalog row</span>
00168   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a26">getNValue</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> <span class="keywordtype">long</span> row, <span class="keywordtype">double</span> *realVal);
00169       <span class="comment">// get the value of the given numerical quantity "name"</span>
00170       <span class="comment">// in the given catalog row</span>
00171 <span class="comment">/*  int getVecValues(const std::string name, const  int row,</span>
00172 <span class="comment">                   std::vector&lt;double&gt; *vecVal);*/</span>
00173       <span class="comment">// get the values of the given vector quantity "name"</span>
00174       <span class="comment">// in the given catalog row</span>
00175   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a27">getStatError</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> <span class="keywordtype">long</span> row, <span class="keywordtype">double</span> *realValStat);
00176       <span class="comment">// get the value of the statistical error associated with quantity "name"</span>
00177       <span class="comment">// in the given catalog row;</span>
00178       <span class="comment">// value is negative if unavailable</span>
00179   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a28">getSysError</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> <span class="keywordtype">long</span> row, <span class="keywordtype">double</span> *realValSys);
00180       <span class="comment">// get the value of the sytematic error associated with quantity "name"</span>
00181       <span class="comment">// in the given catalog row;</span>
00182       <span class="comment">// value is negative if unavailable</span>
00183 <span class="comment">/*  int getVecStatErrors(const std::string name, const long row,</span>
00184 <span class="comment">                       std::vector&lt;double&gt; *vecValStat);*/</span>
00185       <span class="comment">// get the statistical errors associated with vector quantity "name"</span>
00186       <span class="comment">// in the given catalog row</span>
00187 <span class="comment">/*  int getVecSysErrors(const std::string name, const long row,</span>
00188 <span class="comment">                      std::vector&lt;double&gt; *vecValSys);*/</span>
00189       <span class="comment">// get the systematic errors associated with vector quantity "name"</span>
00190       <span class="comment">// in the given catalog row</span>
00191 
00192   <span class="comment">// possible values or range of a given quantity "name"</span>
00193 
00194   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a29">getSValues</a>(<span class="keyword">const</span> std::string name, std::vector&lt;std::string&gt; *values);
00195       <span class="comment">// for numerical quantity: empty</span>
00196       <span class="comment">// for string quantity: the list of different values assumed</span>
00197   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a30">minVal</a>(<span class="keyword">const</span> std::string name, <span class="keywordtype">double</span> *realVal);
00198       <span class="comment">// for string quantity: undefined; default == NO_SEL_CUT</span>
00199       <span class="comment">// for numerical quantity: the minimum value in the catalog</span>
00200   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a31">maxVal</a>(<span class="keyword">const</span> std::string name, <span class="keywordtype">double</span> *realVal);
00201       <span class="comment">// for string quantity: undefined; default == NO_SEL_CUT</span>
00202       <span class="comment">// for numerical quantity: the maximum value in the catalog</span>
00203 
00204 
00205   <span class="comment">// accessing the Catalog contents with in-memory selection criteria applied</span>
00206   <span class="comment">// the row index relates to the selected rows, i.e. is continuous!</span>
00207 
00208   <span class="keywordtype">void</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a32">getNumSelRows</a>(<span class="keywordtype">long</span> *nrows);
00209       <span class="comment">// get the number of selected rows in the catalog</span>
00210   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a33">getSelSValue</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> <span class="keywordtype">long</span> srow,
00211                    std::string *stringVal);
00212   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a34">getSelNValue</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> <span class="keywordtype">long</span> srow, <span class="keywordtype">double</span> *realVal);
00213 <span class="comment">/*  int getSelVecValues(const std::string name, const long srow,</span>
00214 <span class="comment">                      std::vector&lt;double&gt; *vecVal);*/</span>
00215   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a35">getSelStatError</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> <span class="keywordtype">long</span> srow,
00216                       <span class="keywordtype">double</span> *realValStat);
00217   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a36">getSelSysError</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> <span class="keywordtype">long</span> srow,
00218                      <span class="keywordtype">double</span> *realValSys);
00219 <span class="comment">/*  int getSelVecStatErrors(const std::string name, const long srow,</span>
00220 <span class="comment">                          std::vector&lt;double&gt; *vecValStat);</span>
00221 <span class="comment">  int getSelVecSysErrors(const std::string name, const long srow,</span>
00222 <span class="comment">                       std::vector&lt;double&gt; *vecValSys);*/</span>
00223 
00224   <span class="comment">// possible values or range of a given quantity "name" in the selected rows</span>
00225 
00226   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a37">getSelSValues</a>(<span class="keyword">const</span> std::string name, std::vector&lt;std::string&gt; *values);
00227   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a38">minSelVal</a>(<span class="keyword">const</span> std::string name, <span class="keywordtype">double</span> *realVal);
00228   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a39">maxSelVal</a>(<span class="keyword">const</span> std::string name, <span class="keywordtype">double</span> *realVal);
00229 
00230 
00231   <span class="comment">// quick access to generic quantities with or without in-memory selection;</span>
00232 
00233   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a40">ra_deg</a>(<span class="keyword">const</span> <span class="keywordtype">long</span> row, <span class="keywordtype">double</span> *realVal, <span class="keyword">const</span> <span class="keywordtype">bool</span> inSelection=<span class="keyword">false</span>);
00234       <span class="comment">// access to generic quantity for RA  (degrees)</span>
00235   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a41">dec_deg</a>(<span class="keyword">const</span> <span class="keywordtype">long</span> row, <span class="keywordtype">double</span> *realVal, <span class="keyword">const</span> <span class="keywordtype">bool</span> inSelection=<span class="keyword">false</span>);
00236       <span class="comment">// access to generic quantity for DEC (degrees)</span>
00237   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a42">posError_deg</a>(<span class="keyword">const</span> <span class="keywordtype">long</span> row, <span class="keywordtype">double</span> *realVal,
00238                    <span class="keyword">const</span> <span class="keywordtype">bool</span> inSelection=<span class="keyword">false</span>);
00239       <span class="comment">// access to generic quantity for position uncertainty (degrees)</span>
00240 
00241   <span class="comment">// 6 methods returning the name of generic quantities (to use any methods)</span>
00242 
00243   std::string <a class="code" href="classcatalog_access_1_1_catalog.html#a43">getNameRA</a>();
00244   std::string <a class="code" href="classcatalog_access_1_1_catalog.html#a44">getNameDEC</a>();
00245   std::string <a class="code" href="classcatalog_access_1_1_catalog.html#a45">getNamePosErr</a>();
00246   std::string <a class="code" href="classcatalog_access_1_1_catalog.html#a46">getNameL</a>();
00247   std::string <a class="code" href="classcatalog_access_1_1_catalog.html#a47">getNameB</a>();
00248   std::string <a class="code" href="classcatalog_access_1_1_catalog.html#a48">getNameObjName</a>();
00249 
00250 
00251   <span class="comment">// Methods for selecting data</span>
00252   <span class="comment">//---------------------------</span>
00253 
00254   <span class="comment">// All setting or unsetting of cuts immediately takes effect,</span>
00255   <span class="comment">// i.e. the value of the vector m_rowIsSelected is recalculated.</span>
00256   <span class="comment">// Except for the 2 following methods with no impact on m_rowIsSelected:</span>
00257 
00258   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a49">selectQuantity</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> <span class="keywordtype">bool</span> toBeLoaded);
00259       <span class="comment">// select or unselect a given quantity before loading,</span>
00260       <span class="comment">// importSelected() will actually load selected quantities</span>
00261   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a50">selectAllQuantities</a>(<span class="keyword">const</span> <span class="keywordtype">bool</span> toBeLoaded);
00262       <span class="comment">// idem on all quantities at once</span>
00263 
00264   <span class="comment">// comment: all 'unset' methods have only an effect if the cuts were applied</span>
00265   <span class="comment">// after loading the data AND the eraseNonSelected method was not called</span>
00266 
00267   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a52">unsetCuts</a>(<span class="keyword">const</span> std::string name);
00268       <span class="comment">// unset all selection criteria relating to quantity "name"</span>
00269   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a52">unsetCuts</a>();
00270       <span class="comment">// unset all cuts on all quantities except the selection ellipse;</span>
00271       <span class="comment">// this also deletes the selection string</span>
00272 
00273   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a53">setCriteriaORed</a>(<span class="keyword">const</span> <span class="keywordtype">bool</span> bitOR=<span class="keyword">true</span>);
00274       <span class="comment">// if true, criteria between quantities are ORed instead of ANDed</span>
00275 
00276   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a54">setSelEllipse</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> centRA_deg, <span class="keyword">const</span> <span class="keywordtype">double</span> centDEC_deg,
00277                     <span class="keyword">const</span> <span class="keywordtype">double</span> majAxis_deg, <span class="keyword">const</span> <span class="keywordtype">double</span> minAxis_deg,
00278                     <span class="keyword">const</span> <span class="keywordtype">double</span> rot_deg=0.);
00279       <span class="comment">// set and apply an elliptical selection region</span>
00280       <span class="comment">// (box cuts of constant size CANNOT be achieved)</span>
00281   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a55">unsetSelEllipse</a>();        <span class="comment">// remove the effects of the ellipse selection</span>
00282 
00283   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a56">setLowerCut</a>(<span class="keyword">const</span> std::string name, <span class="keywordtype">double</span> cutVal);
00284       <span class="comment">// set and apply a cut on quantity "name" (all values &gt;= cutVal pass)</span>
00285       <span class="comment">// double is not const because it can be locally modified to NO_SEL_CUT</span>
00286   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a57">setUpperCut</a>(<span class="keyword">const</span> std::string name, <span class="keywordtype">double</span> cutVal);
00287       <span class="comment">// set and apply a cut on quantity "name" (all values &lt;= cutVal pass)</span>
00288       <span class="comment">// double is not const because it can be locally modified to NO_SEL_CUT</span>
00289 <span class="comment">/*  int setLowerVecCuts(const std::string name,</span>
00290 <span class="comment">                      const std::vector&lt;double&gt; &amp;cutValues);*/</span>
00291       <span class="comment">// set and apply a cut on quantities in VECTOR type quantity "name"</span>
00292       <span class="comment">// such that all values &gt;= cutValues[i] pass</span>
00293 <span class="comment">/*  int setUpperVecCuts(const std::string name,</span>
00294 <span class="comment">                      const std::vector&lt;double&gt; &amp;cutValues);*/</span>
00295       <span class="comment">// set and apply a cut on quantities in VECTOR type quantity "name"</span>
00296       <span class="comment">// such that all values &lt;= cutValues[i] pass</span>
00297   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a58">excludeS</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> std::vector&lt;std::string&gt; &amp;slist,
00298                <span class="keyword">const</span> <span class="keywordtype">bool</span> exact=<span class="keyword">false</span>);
00299       <span class="comment">// exclude all rows which have string value in the given list</span>
00300   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a59">useOnlyS</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> std::vector&lt;std::string&gt; &amp;slist,
00301                <span class="keyword">const</span> <span class="keywordtype">bool</span> exact=<span class="keyword">false</span>);
00302       <span class="comment">// only include rows which have string value in the given list</span>
00303   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a60">excludeN</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> std::vector&lt;double&gt; &amp;listVal);
00304       <span class="comment">// include rows which value is NOT around one numerical in list</span>
00305       <span class="comment">// AND value is inside the cut interval</span>
00306   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a61">useOnlyN</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> std::vector&lt;double&gt; &amp;listVal);
00307       <span class="comment">// only include rows which value is around one numerical in list</span>
00308       <span class="comment">// AND is inside the cut interval</span>
00309   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a62">includeN</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> std::vector&lt;double&gt; &amp;listVal);
00310       <span class="comment">// only include rows which value is around one numerical in list</span>
00311       <span class="comment">// OR is inside the cut interval</span>
00312   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a63">setRejectNaN</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> <span class="keywordtype">bool</span> rejectNaN);
00313       <span class="comment">// set quantity member m_rejectNaN and apply</span>
00314       <span class="comment">// (if different from previous and quantity is selected)  </span>
00315   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a64">setMatchPercent</a>(<span class="keyword">const</span> std::string name, <span class="keywordtype">double</span> percent);
00316   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a65">setMatchEpsilon</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> step);
00317       <span class="comment">// set quantity member m_precision and apply</span>
00318       <span class="comment">// (if quantity has a non empty selection list)   </span>
00319   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a66">checkValWithinCut</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> <span class="keywordtype">double</span> value,
00320                         <span class="keywordtype">bool</span> *cutLow, <span class="keywordtype">bool</span> *cutUp, <span class="keywordtype">int</span> *checkResult);
00321       <span class="comment">// check if value (that could be used for list selection) is incompatible</span>
00322       <span class="comment">// with the cut of given quantity</span>
00323       <span class="comment">// Is given value within interval cut (boolean true if cut exist) ?</span>
00324       <span class="comment">// 0 means within interval (or no cut, both boolean false)</span>
00325       <span class="comment">// negative if below LowerCut, positive if above UpperCut;</span>
00326       <span class="comment">// -2 or 2 if value and precision sphere outside cut (useOnlyN can't</span>
00327       <span class="comment">//         select anything, value useless for excludeS)</span>
00328       <span class="comment">// -1 or 1 if value outside cut but precision sphere cross cut</span>
00329 
00330   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a67">eraseNonSelected</a>();
00331       <span class="comment">// erase all non-selected rows from memory</span>
00332   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a68">eraseSelected</a>();
00333       <span class="comment">// erase all selected rows from memory</span>
00334 
00335 
00336   <span class="comment">// general cut described by string to be parsed</span>
00337 
00338 <span class="comment">/*  int setCutString(const std::string stringVal);*/</span>
00339       <span class="comment">// set the selection string m_selection</span>
00340       <span class="comment">// Syntax:</span>
00341       <span class="comment">// a) quantities are described by giving their name</span>
00342       <span class="comment">//    in square brackets, e.g. [f6cm]</span>
00343       <span class="comment">// b) otherwise FORTRAN syntax is used, e.g.</span>
00344       <span class="comment">//   "[f6cm].geq.[f12cm].and.([hr1]-[hr2]).lt.2.3"</span>
00345       <span class="comment">//</span>
00346       <span class="comment">// returns 1 if expression is correct, negative number otherwise</span>
00347 
00348 <span class="comment">/*  void getCutString(std::string *stringVal);*/</span>
00349       <span class="comment">// get a copy of m_selection</span>
00350     
00351 <span class="comment">/*  int selStringTrue(const long row, bool *isSelected);*/</span>
00352       <span class="comment">// return true if the condition described by m_selection is true</span>
00353       <span class="comment">// for the given row, otherwise false</span>
00354 
00355 
00356   <span class="comment">// Methods for sorting</span>
00357   <span class="comment">//--------------------</span>
00358 
00359   <span class="comment">// will use sorting methods present in the standard template library</span>
00360 
00361 <span class="comment">//  void sortAscend(const std::string quantityName);</span>
00362       <span class="comment">// reassign the row numbers by sorting by the given</span>
00363       <span class="comment">// quantity in ascending order</span>
00364 
00365 <span class="comment">//  void sortDecend(const std::string quantityName);</span>
00366       <span class="comment">// reassign the row numbers by sorting by the given</span>
00367       <span class="comment">// quantity in decending order</span>
00368 
00369 <span class="comment">/**********************************************************************/</span>
00370 <span class="keyword">private</span>:
00371 
<a name="l00372"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o0">00372</a>   std::string <a class="code" href="classcatalog_access_1_1_catalog.html#o0">m_code</a>;
<a name="l00373"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o1">00373</a>   std::string <a class="code" href="classcatalog_access_1_1_catalog.html#o1">m_URL</a>;
<a name="l00374"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o2">00374</a>   std::string <a class="code" href="classcatalog_access_1_1_catalog.html#o2">m_catName</a>;
<a name="l00375"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o3">00375</a>   std::string <a class="code" href="classcatalog_access_1_1_catalog.html#o3">m_catRef</a>;
<a name="l00376"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o4">00376</a>   std::string <a class="code" href="classcatalog_access_1_1_catalog.html#o4">m_tableName</a>;
<a name="l00377"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o5">00377</a>   std::string <a class="code" href="classcatalog_access_1_1_catalog.html#o5">m_tableRef</a>;
<a name="l00378"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o6">00378</a>   std::fstream <a class="code" href="classcatalog_access_1_1_catalog.html#o6">myFile</a>;    <span class="comment">// input/output file</span>
<a name="l00379"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o7">00379</a>   <span class="keywordtype">long</span>        <a class="code" href="classcatalog_access_1_1_catalog.html#o7">m_filePos</a>;  <span class="comment">// position where data start for importSelected()</span>
<a name="l00380"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o8">00380</a>   <span class="keywordtype">double</span> <a class="code" href="classcatalog_access_1_1_catalog.html#o8">m_posErrSys</a>;
<a name="l00381"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o9">00381</a>   <span class="keywordtype">double</span> <a class="code" href="classcatalog_access_1_1_catalog.html#o9">m_posErrFactor</a>;
00382 
<a name="l00383"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o10">00383</a>   std::vector&lt;Quantity&gt; <a class="code" href="classcatalog_access_1_1_catalog.html#o10">m_quantities</a>;      <span class="comment">// the definition of the catalog</span>
<a name="l00384"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o11">00384</a>   std::vector&lt;bool&gt;     <a class="code" href="classcatalog_access_1_1_catalog.html#o11">m_loadQuantity</a>;    <span class="comment">// which quantities to load ?</span>
00385 
<a name="l00386"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o12">00386</a>   std::vector&lt;std::vector&lt;std::string&gt; &gt; <a class="code" href="classcatalog_access_1_1_catalog.html#o12">m_strings</a>;
00387       <span class="comment">// stores all string contents of the catalog;</span>
00388       <span class="comment">// e.g. m_strings[3] gives you the vector containing</span>
00389       <span class="comment">// the values of quantity 3 from the catalog;</span>
00390       <span class="comment">// m_strings[3][25] gives you the value of quantity 3 for catalog entry 25</span>
00391 
00392   <span class="comment">// comment: the number string quantities in the catalog == m_strings.size()</span>
00393 
<a name="l00394"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o13">00394</a>   std::vector&lt;std::vector&lt;double&gt; &gt; <a class="code" href="classcatalog_access_1_1_catalog.html#o13">m_numericals</a>;
00395       <span class="comment">// stores all numerical contents of the catalog</span>
00396 
00397   <span class="comment">// comment: the number of numerical quantities == m_numericals.size()</span>
00398 
<a name="l00399"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o14">00399</a>   <span class="keywordtype">long</span> <a class="code" href="classcatalog_access_1_1_catalog.html#o14">m_numOriRows</a>;            <span class="comment">// maximal number of rows in CDS catalog</span>
<a name="l00400"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o15">00400</a>   <span class="keywordtype">long</span> <a class="code" href="classcatalog_access_1_1_catalog.html#o15">m_numReadRows</a>;           <span class="comment">// maximal number of rows user reads in file</span>
<a name="l00401"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o16">00401</a>   <span class="keywordtype">long</span> <a class="code" href="classcatalog_access_1_1_catalog.html#o16">m_numRows</a>;
00402       <span class="comment">// number of catalog rows loaded into memory</span>
00403       <span class="comment">// ( == m_strings[0].size() if m_strings.size() != 0 which should always</span>
00404       <span class="comment">//   be true due to the existence of generic quantities )</span>
00405       <span class="comment">// ( also == m_numericals[0].size if m_numericals.size != 0 which should</span>
00406       <span class="comment">//   always be true due to the existence of generic quantities )</span>
00407 
<a name="l00408"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o17">00408</a>   std::vector&lt;std::vector&lt;unsigned long&gt; &gt; <a class="code" href="classcatalog_access_1_1_catalog.html#o17">m_rowIsSelected</a>; 
00409       <span class="comment">// false by default, i.e. all bits to 0;</span>
00410       <span class="comment">// each vector column has m_numRows elements; for a given row:</span>
00411       <span class="comment">// first bit to 1 if all selection criteria are met</span>
00412       <span class="comment">// each following bits for one quantity criteria</span>
00413 
<a name="l00414"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o18">00414</a>   std::string <a class="code" href="classcatalog_access_1_1_catalog.html#o18">m_selection</a>;      <span class="comment">// to contain a general cut which is parsed</span>
00415                                 <span class="comment">// by the method setCutString()</span>
<a name="l00416"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o19">00416</a>   <span class="keywordtype">bool</span> <a class="code" href="classcatalog_access_1_1_catalog.html#o19">m_criteriaORed</a>;
00417       <span class="comment">// if true: OR instead of AND between bits of m_rowIsSelected</span>
00418 
<a name="l00419"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o20">00419</a>   <span class="keywordtype">bool</span> <a class="code" href="classcatalog_access_1_1_catalog.html#o20">m_selRegion</a>;
00420       <span class="comment">// true if an elliptical region is to be selected;</span>
00421       <span class="comment">// default == false</span>
<a name="l00422"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o21">00422</a>   <span class="keywordtype">double</span> <a class="code" href="classcatalog_access_1_1_catalog.html#o21">m_selEllipseCentRA_deg</a>;
00423       <span class="comment">// the RA of the center of the ellipse (degrees)</span>
<a name="l00424"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o22">00424</a>   <span class="keywordtype">double</span> <a class="code" href="classcatalog_access_1_1_catalog.html#o22">m_selEllipseCentDEC_deg</a>;
00425       <span class="comment">// the DEC of the center of the ellipse (degrees)</span>
<a name="l00426"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o23">00426</a>   <span class="keywordtype">double</span> <a class="code" href="classcatalog_access_1_1_catalog.html#o23">m_selEllipseMinAxis_deg</a>;
00427       <span class="comment">// the size of the minor axis (degrees)</span>
<a name="l00428"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o24">00428</a>   <span class="keywordtype">double</span> <a class="code" href="classcatalog_access_1_1_catalog.html#o24">m_selEllipseMajAxis_deg</a>;
00429       <span class="comment">// the size of the major axis (degrees)</span>
<a name="l00430"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o25">00430</a>   <span class="keywordtype">double</span> <a class="code" href="classcatalog_access_1_1_catalog.html#o25">m_selEllipseRot_deg</a>;
00431       <span class="comment">// the rotation angle, i.e. the angle between major axis and the</span>
00432       <span class="comment">// celestial equator (degrees); default == 0</span>
00433 
00434   <span class="comment">// following four data members needed for efficient selection</span>
<a name="l00435"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o26">00435</a>   <span class="keywordtype">long</span> <a class="code" href="classcatalog_access_1_1_catalog.html#o26">m_numSelRows</a>;            <span class="comment">// for quick test: 0 = nothing selected</span>
<a name="l00436"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o27">00436</a>   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#o27">m_indexErr</a>;               <span class="comment">// index for position error in Quantity vector</span>
<a name="l00437"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o28">00437</a>   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#o28">m_indexRA</a>;                <span class="comment">// index for RA  in Quantity vector</span>
<a name="l00438"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o29">00438</a>   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#o29">m_indexDEC</a>;               <span class="comment">// index for DEC in Quantity vector</span>
<a name="l00439"></a><a class="code" href="classcatalog_access_1_1_catalog.html#o30">00439</a>   std::vector&lt;double&gt; <a class="code" href="classcatalog_access_1_1_catalog.html#o30">m_selEllipse</a>;
00440       <span class="comment">// the sinus and cosinus of the 2 spherical angles + ellipse size</span>
00441 
00442   <span class="keywordtype">void</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c0">deleteDescription</a>();
00443       <span class="comment">// erase the changes made by "importDescription"</span>
00444       <span class="comment">// must call first "deleteContent" if "import" or "importSelected" done</span>
00445   <span class="keywordtype">void</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c1">deleteQuantities</a>();
00446       <span class="comment">// erase elements in m_quantities according to m_loadQuantity,</span>
00447       <span class="comment">// deleteContent() MUST be done before</span>
00448 
00449   <span class="keywordtype">bool</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c2">checkRegion</a>(<span class="keyword">const</span> <span class="keywordtype">long</span> row, <span class="keyword">const</span> <span class="keywordtype">int</span> nRA, <span class="keyword">const</span> <span class="keywordtype">int</span> nDEC);
00450       <span class="comment">// check if given row is inside the elliptical region,</span>
00451       <span class="comment">// nRA and nDEC are the position inside m_numericals.</span>
00452   <span class="keywordtype">bool</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c3">checkNUM</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> r, <span class="keyword">const</span> <span class="keywordtype">int</span> index, <span class="keyword">const</span> <span class="keywordtype">bool</span> miss,
00453                 <span class="keyword">const</span> <span class="keywordtype">bool</span> reject, <span class="keyword">const</span> <span class="keywordtype">double</span> precis);
00454       <span class="comment">// check if value pass criteria for given quantity index (cut AND list)</span>
00455   <span class="keywordtype">bool</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c4">checkNUMor</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> r, <span class="keyword">const</span> <span class="keywordtype">int</span> index,
00456                   <span class="keyword">const</span> <span class="keywordtype">bool</span> reject, <span class="keyword">const</span> <span class="keywordtype">double</span> precis);
00457       <span class="comment">// check if value pass criteria for given quantity index (cut OR list)</span>
00458   <span class="keywordtype">bool</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c5">rowSelect</a>(<span class="keyword">const</span> <span class="keywordtype">long</span> row, <span class="keyword">const</span> std::vector&lt;bool&gt; &amp;quantSel);
00459       <span class="comment">// compute the global row selection from bits in m_rowIsSelected</span>
00460   <span class="keywordtype">void</span> <a class="code" href="classcatalog_access_1_1_catalog.html#a52">unsetCuts</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> index);
00461       <span class="comment">// unset cut on quantity found by its existing index</span>
00462 
00463   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c7">doSelS</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> <span class="keywordtype">int</span> index, <span class="keyword">const</span> <span class="keywordtype">int</span> code,
00464              <span class="keyword">const</span> std::vector&lt;std::string&gt; &amp;list, <span class="keyword">const</span> <span class="keywordtype">bool</span> exact);
00465       <span class="comment">// select rows depending on the given string list</span>
00466   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c8">doSelN</a>(<span class="keyword">const</span> std::string name, <span class="keyword">const</span> <span class="keywordtype">int</span> index, <span class="keyword">const</span> <span class="keywordtype">int</span> code,
00467              <span class="keyword">const</span> std::vector&lt;double&gt; &amp;listVal);
00468       <span class="comment">// select rows depending on the given numerical list</span>
00469 
00470   <span class="keywordtype">void</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c9">setPosErrFactor</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> index);
00471       <span class="comment">// called by setGeneric() to set m_posErrFactor</span>
00472   <span class="keywordtype">void</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c10">setGeneric</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> whichCat);
00473       <span class="comment">// called just after "import..." to set m_isGeneric, m_index*</span>
00474   <span class="keywordtype">void</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c11">create_tables</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> nbQuantAscii);
00475       <span class="comment">// creates a new column in m_strings, m_numericals</span>
00476   <span class="keywordtype">void</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c12">add_rows</a>();
00477       <span class="comment">// creates a new row in m_strings, m_numericals</span>
00478   <span class="keywordtype">void</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c13">translate_cell</a>(std::string mot, <span class="keyword">const</span> <span class="keywordtype">int</span> index);
00479       <span class="comment">// loads one quantity at last row (m_numRows);</span>
00480 
00481   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c14">analyze_fits</a>(<span class="keyword">const</span> tip::Table *myDOL, <span class="keyword">const</span> <span class="keywordtype">bool</span> getDescr,
00482                    <span class="keyword">const</span> std::string origin);
00483   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c15">analyze_head</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> *tot, <span class="keywordtype">int</span> *what, <span class="keywordtype">bool</span> *testCR);
00484   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c16">analyze_body</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> *tot, <span class="keywordtype">int</span> *what, <span class="keyword">const</span> <span class="keywordtype">bool</span> testCR,
00485                    <span class="keyword">const</span> <span class="keywordtype">bool</span> getDescr);
00486       <span class="comment">// 3 methods read file for import or importDescription (getDescr=true)</span>
00487       <span class="comment">// returns IS_OK for completion, otherwise strictly negative number</span>
00488 
00489   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c17">load</a>(<span class="keyword">const</span> std::string &amp;fileName, <span class="keyword">const</span> std::string ext,
00490            <span class="keyword">const</span> <span class="keywordtype">bool</span> getDescr);
00491       <span class="comment">// common code between import and importDescription</span>
00492   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c18">loadWeb</a>(<span class="keyword">const</span> std::string catName, <span class="keyword">const</span> std::string urlCode,
00493               <span class="keyword">const</span> std::string &amp;fileName, <span class="keyword">const</span> <span class="keywordtype">long</span> maxRow);
00494       <span class="comment">// common code between importWeb and importDescriptionWeb</span>
00495   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c19">loadSelected</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> *tot);
00496       <span class="comment">// code for ASCII file importSelected()</span>
00497 
00498   <span class="comment">// create catalog header from memory to a text file</span>
00499   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c20">createText</a>(<span class="keyword">const</span> std::string &amp;fileName, <span class="keywordtype">bool</span> clobber,
00500                  <span class="keyword">const</span> std::string origin);
00501   <span class="comment">// create catalog header from memory to a FITS file</span>
00502   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c21">createFits</a>
00503      (<span class="keyword">const</span> std::string &amp;fileName, <span class="keyword">const</span> std::string &amp;extName, <span class="keywordtype">bool</span> clobber,
00504       <span class="keywordtype">bool</span> append, <span class="keyword">const</span> std::string origin, tip::Table **ptrTable);
00505 
00506   <span class="comment">// inline private methods</span>
00507 
00508   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c22">checkImport</a>(<span class="keyword">const</span> std::string origin, <span class="keyword">const</span> <span class="keywordtype">bool</span> isDone);
00509       <span class="comment">// return -1 or -2 if problem, 0 or positive number otherwise</span>
00510       <span class="comment">// if isDone is true, cannot return 0=IS_VOID</span>
00511       <span class="comment">// if isDone is true and import is done, return m_quantities.size</span>
00512       <span class="comment">// if isDone is false and import NOT done, return 0</span>
00513   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c23">checkCatName</a>(<span class="keyword">const</span> std::string origin, <span class="keyword">const</span> std::string catName);
00514       <span class="comment">// return -3 if catName do not exist, its index otherwise</span>
00515   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c24">checkSize_row</a>(<span class="keyword">const</span> std::string origin, <span class="keyword">const</span> <span class="keywordtype">long</span> row);
00516       <span class="comment">// return strictly positive number (m_numRows) if row exist</span>
00517   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c25">checkQuant_name</a>(<span class="keyword">const</span> std::string origin, <span class="keyword">const</span> std::string name);
00518       <span class="comment">// return negative number if problem, quantity index otherwise</span>
00519   <span class="keywordtype">int</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c26">checkSel_row</a>(<span class="keyword">const</span> std::string origin, <span class="keyword">const</span> <span class="keywordtype">long</span> srow);
00520       <span class="comment">// return strictly positive number (m_numSelRows) if selected row exist</span>
00521 
00522   <span class="keywordtype">bool</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c27">existCriteria</a>(std::vector&lt;bool&gt; *quantSel);
00523       <span class="comment">// return true if at least one criteria or selection region exist</span>
00524   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="classcatalog_access_1_1_catalog.html#c28">bitPosition</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> index, <span class="keywordtype">int</span> *k);
00525       <span class="comment">// return long int to test m_quantities[index] bit in m_rowIsSelected[k]</span>
00526 
00527   <span class="comment">// constant members</span>
00528   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classcatalog_access_1_1_catalog.html#r0">s_CatalogURL</a>[<a class="code" href="catalog_8h.html#a2">MAX_URL</a>];
00529   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classcatalog_access_1_1_catalog.html#r1">s_CatalogList</a>[2*<a class="code" href="catalog_8h.html#a0">MAX_CAT</a>];
00530   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classcatalog_access_1_1_catalog.html#r2">s_CatalogGeneric</a>[<a class="code" href="catalog_8h.html#a0">MAX_CAT</a>][<a class="code" href="catalog_8h.html#a1">MAX_GEN</a>];
00531   <span class="keyword">static</span> <span class="keyword">const</span> std::string <a class="code" href="classcatalog_access_1_1_catalog.html#r3">s_genericL</a>;
00532   <span class="keyword">static</span> <span class="keyword">const</span> std::string <a class="code" href="classcatalog_access_1_1_catalog.html#r4">s_genericB</a>;
00533 
00534 }; <span class="comment">// end top class definition</span>
00535 
00536 
00537 <span class="comment">/**********************************************************************/</span>
00538 <span class="comment">/*  DEFINING inline FUNCTION MEMBERS                                  */</span>
00539 <span class="comment">/**********************************************************************/</span>
00540 
00541 <span class="comment">// Default constructor</span>
<a name="l00542"></a><a class="code" href="classcatalog_access_1_1_catalog.html#a0">00542</a> <span class="keyword">inline</span> Catalog::Catalog() {
00543 
00544 
00545   <a class="code" href="classcatalog_access_1_1_catalog.html#o0">m_code</a>=<span class="stringliteral">""</span>;
00546   <a class="code" href="classcatalog_access_1_1_catalog.html#o1">m_URL</a> =<span class="stringliteral">""</span>;
00547   <a class="code" href="classcatalog_access_1_1_catalog.html#o2">m_catName</a>   =<span class="stringliteral">""</span>;
00548   <a class="code" href="classcatalog_access_1_1_catalog.html#o3">m_catRef</a>    =<span class="stringliteral">""</span>;
00549   <a class="code" href="classcatalog_access_1_1_catalog.html#o4">m_tableName</a> =<span class="stringliteral">""</span>;
00550   <a class="code" href="classcatalog_access_1_1_catalog.html#o5">m_tableRef</a>  =<span class="stringliteral">""</span>;
00551   <a class="code" href="classcatalog_access_1_1_catalog.html#o7">m_filePos</a>   =0;
00552   <a class="code" href="classcatalog_access_1_1_catalog.html#o8">m_posErrSys</a> = -1.0;
00553   <a class="code" href="classcatalog_access_1_1_catalog.html#o9">m_posErrFactor</a>=1.0;  <span class="comment">// "deg" by default</span>
00554 
00555   <a class="code" href="classcatalog_access_1_1_catalog.html#o16">m_numRows</a>   =<a class="code" href="namespacecatalog_access.html#a35a14">IMPORT_NEED</a>;
00556   <a class="code" href="classcatalog_access_1_1_catalog.html#o14">m_numOriRows</a>=0;
00557   <a class="code" href="classcatalog_access_1_1_catalog.html#o15">m_numReadRows</a>=0;
00558   <a class="code" href="classcatalog_access_1_1_catalog.html#o18">m_selection</a> =<span class="stringliteral">""</span>;
00559   <a class="code" href="classcatalog_access_1_1_catalog.html#o19">m_criteriaORed</a>=<span class="keyword">false</span>;
00560   <a class="code" href="classcatalog_access_1_1_catalog.html#o20">m_selRegion</a> =<span class="keyword">false</span>;
00561   <span class="comment">// following four data members needed for efficient selection</span>
00562   <a class="code" href="classcatalog_access_1_1_catalog.html#o26">m_numSelRows</a>=0;
00563   <a class="code" href="classcatalog_access_1_1_catalog.html#o27">m_indexErr</a>= -1;
00564   <a class="code" href="classcatalog_access_1_1_catalog.html#o28">m_indexRA</a> = -1;
00565   <a class="code" href="classcatalog_access_1_1_catalog.html#o29">m_indexDEC</a>= -1;
00566   <span class="keywordflow">try</span> { <a class="code" href="classcatalog_access_1_1_catalog.html#o30">m_selEllipse</a>.assign(7, 0.0); }
00567   <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception &amp;err) {
00568     std::string errText;
00569     errText=std::string(<span class="stringliteral">"EXCEPTION on creating m_selEllipse: "</span>)+err.what();
00570     <a class="code" href="namespacecatalog_access.html#a32">printErr</a>(<span class="stringliteral">"Catalog constructor"</span>, errText);
00571     <span class="keywordflow">throw</span>;
00572   }
00573   <a class="code" href="namespacecatalog_access.html#a5">verbosity</a>=3;
00574 <span class="preprocessor">  #ifdef DEBUG_CAT</span>
00575 <span class="preprocessor"></span>  std::cout &lt;&lt; <span class="stringliteral">"!! DEBUG Catalog constructor (sizes="</span> &lt;&lt;  <a class="code" href="classcatalog_access_1_1_catalog.html#o10">m_quantities</a>.size()
00576             &lt;&lt;<span class="stringliteral">","</span>&lt;&lt; <a class="code" href="classcatalog_access_1_1_catalog.html#o12">m_strings</a>.size() &lt;&lt;<span class="stringliteral">","</span>&lt;&lt; <a class="code" href="classcatalog_access_1_1_catalog.html#o13">m_numericals</a>.size() &lt;&lt;<span class="stringliteral">","</span>
00577             &lt;&lt; <a class="code" href="classcatalog_access_1_1_catalog.html#o17">m_rowIsSelected</a>.size() &lt;&lt;<span class="stringliteral">", m_selEllipse "</span>&lt;&lt; <a class="code" href="classcatalog_access_1_1_catalog.html#o30">m_selEllipse</a>.size()
00578             &lt;&lt; <span class="stringliteral">")"</span> &lt;&lt; std::endl;
00579 <span class="preprocessor">  #endif</span>
00580 <span class="preprocessor"></span>}
00581 
00582 <span class="comment">/**********************************************************************/</span>
00583 <span class="comment">// Destructor needed to free memory</span>
<a name="l00584"></a><a class="code" href="classcatalog_access_1_1_catalog.html#a1">00584</a> <span class="keyword">inline</span> Catalog::~Catalog() {
00585 
00586 <span class="preprocessor">  #ifdef DEBUG_CAT</span>
00587 <span class="preprocessor"></span>  std::cout &lt;&lt; <span class="stringliteral">"!! DEBUG Catalog destructor on: "</span>
00588             &lt;&lt; <a class="code" href="classcatalog_access_1_1_catalog.html#o4">m_tableName</a> &lt;&lt; std::endl;
00589 <span class="preprocessor">  #endif</span>
00590 <span class="preprocessor"></span>  <a class="code" href="classcatalog_access_1_1_catalog.html#a23">deleteContent</a>();
00591   <a class="code" href="classcatalog_access_1_1_catalog.html#c0">deleteDescription</a>();
00592 }
00593 
00594 <span class="comment">/**********************************************************************/</span>
00595 <span class="comment">// check if import or importDescription already done</span>
<a name="l00596"></a><a class="code" href="classcatalog_access_1_1_catalog.html#c22">00596</a> <span class="keyword">inline</span> <span class="keywordtype">int</span> Catalog::checkImport(<span class="keyword">const</span> std::string origin, <span class="keyword">const</span> <span class="keywordtype">bool</span> isDone) {
00597 
00598   <span class="keywordtype">int</span> quantSize=<a class="code" href="classcatalog_access_1_1_catalog.html#o10">m_quantities</a>.size();
00599   <span class="keywordflow">if</span> (quantSize &gt; 0) {
00600     <span class="keywordflow">if</span> (isDone) <span class="keywordflow">return</span> quantSize;
00601     <span class="keywordflow">if</span> (<a class="code" href="classcatalog_access_1_1_catalog.html#o16">m_numRows</a> &lt;= 0) {
00602       <a class="code" href="namespacecatalog_access.html#a34">printLog</a>(2, <span class="stringliteral">"deleting previous Catalog description"</span>);
00603       <a class="code" href="classcatalog_access_1_1_catalog.html#c0">deleteDescription</a>();
00604       <span class="keywordflow">return</span> <a class="code" href="namespacecatalog_access.html#a35a12">IS_VOID</a>;
00605     }
00606     <a class="code" href="namespacecatalog_access.html#a33">printWarn</a>(origin, <span class="stringliteral">"call 'deleteContent' before importing again"</span>);
00607     <span class="keywordflow">return</span> <a class="code" href="namespacecatalog_access.html#a35a13">IMPORT_BIS</a>;
00608   }
00609   <span class="keywordflow">else</span> {
00610     <span class="keywordflow">if</span> (! isDone) <span class="keywordflow">return</span> <a class="code" href="namespacecatalog_access.html#a35a12">IS_VOID</a>;
00611     <a class="code" href="namespacecatalog_access.html#a33">printWarn</a>(origin, <span class="stringliteral">"must first use one 'import' method"</span>);
00612     <span class="keywordflow">return</span> <a class="code" href="namespacecatalog_access.html#a35a14">IMPORT_NEED</a>;
00613   }
00614 }
00615 
00616 <span class="comment">/**********************************************************************/</span>
00617 <span class="comment">// check if catName is valid </span>
<a name="l00618"></a><a class="code" href="classcatalog_access_1_1_catalog.html#c23">00618</a> <span class="keyword">inline</span> <span class="keywordtype">int</span> Catalog::checkCatName(<span class="keyword">const</span> std::string origin,
00619                                  <span class="keyword">const</span> std::string catName) {
00620 
00621   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="catalog_8h.html#a0">MAX_CAT</a>; i++) {
00622     <span class="keywordflow">if</span> (Catalog::s_CatalogList[2*i] == catName) <span class="keywordflow">return</span> i;
00623   }
00624   std::string errText;
00625   errText=<span class="stringliteral">"given Catalog name ("</span>+catName+<span class="stringliteral">") do not exist"</span>;
00626   <a class="code" href="namespacecatalog_access.html#a33">printWarn</a>(origin, errText);
00627   <span class="keywordflow">return</span> <a class="code" href="namespacecatalog_access.html#a35a15">BAD_CATNAME</a>;
00628 }
00629 
00630 <span class="comment">/**********************************************************************/</span>
00631 <span class="comment">// check if catalog was succesfully loaded and row exist</span>
<a name="l00632"></a><a class="code" href="classcatalog_access_1_1_catalog.html#c24">00632</a> <span class="keyword">inline</span> <span class="keywordtype">int</span> Catalog::checkSize_row(<span class="keyword">const</span> std::string origin, <span class="keyword">const</span> <span class="keywordtype">long</span> row) {
00633 
00634   <span class="keywordflow">if</span> (<a class="code" href="classcatalog_access_1_1_catalog.html#o16">m_numRows</a> &lt;= 0) {
00635     <a class="code" href="namespacecatalog_access.html#a33">printWarn</a>(origin, <span class="stringliteral">"catalog is empty"</span>);
00636     <span class="keywordflow">return</span> <a class="code" href="namespacecatalog_access.html#a35a12">IS_VOID</a>;
00637   }
00638   <span class="keywordflow">if</span> ((row &lt; 0) || (row &gt;= <a class="code" href="classcatalog_access_1_1_catalog.html#o16">m_numRows</a>)) {
00639     std::ostringstream sortie;
00640     sortie &lt;&lt; <span class="stringliteral">"row must be within [ 0, "</span> &lt;&lt; <a class="code" href="classcatalog_access_1_1_catalog.html#o16">m_numRows</a>-1 &lt;&lt; <span class="stringliteral">"]"</span>;
00641     <a class="code" href="namespacecatalog_access.html#a33">printWarn</a>(origin, sortie.str());
00642     <span class="keywordflow">return</span> <a class="code" href="namespacecatalog_access.html#a35a22">BAD_ROW</a>;
00643   }
00644   <span class="keywordflow">return</span> <a class="code" href="classcatalog_access_1_1_catalog.html#o16">m_numRows</a>;
00645 }
00646 
00647 <span class="comment">/**********************************************************************/</span>
00648 <span class="comment">// check if quantity name is valid</span>
<a name="l00649"></a><a class="code" href="classcatalog_access_1_1_catalog.html#c25">00649</a> <span class="keyword">inline</span> <span class="keywordtype">int</span> Catalog::checkQuant_name(<span class="keyword">const</span> std::string origin,
00650                                     <span class="keyword">const</span> std::string name) {
00651 
00652   <span class="keywordtype">int</span> quantSize=<a class="code" href="classcatalog_access_1_1_catalog.html#o10">m_quantities</a>.size();
00653   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;quantSize; i++) {
00654     <span class="keywordflow">if</span> (<a class="code" href="classcatalog_access_1_1_catalog.html#o10">m_quantities</a>[i].m_name == name) <span class="keywordflow">return</span> i;
00655   }
00656   std::string errText;
00657   errText=<span class="stringliteral">"given Quantity name ("</span>+name+<span class="stringliteral">") do not exist"</span>;
00658   <a class="code" href="namespacecatalog_access.html#a33">printWarn</a>(origin, errText);
00659   <span class="keywordflow">return</span> <a class="code" href="namespacecatalog_access.html#a35a23">BAD_QUANT_NAME</a>;
00660 }
00661 
00662 <span class="comment">/**********************************************************************/</span>
00663 <span class="comment">// check if catalog was succesfully loaded and selected row exist</span>
<a name="l00664"></a><a class="code" href="classcatalog_access_1_1_catalog.html#c26">00664</a> <span class="keyword">inline</span> <span class="keywordtype">int</span> Catalog::checkSel_row(<span class="keyword">const</span> std::string origin, <span class="keyword">const</span> <span class="keywordtype">long</span> srow) {
00665 
00666   <span class="keywordflow">if</span> (<a class="code" href="classcatalog_access_1_1_catalog.html#o16">m_numRows</a> &lt;= 0) {
00667     <a class="code" href="namespacecatalog_access.html#a33">printWarn</a>(origin, <span class="stringliteral">"catalog is empty"</span>);
00668     <span class="keywordflow">return</span> <a class="code" href="namespacecatalog_access.html#a35a12">IS_VOID</a>;
00669   }
00670   <span class="keywordflow">if</span> (<a class="code" href="classcatalog_access_1_1_catalog.html#o26">m_numSelRows</a> == 0) {
00671     <a class="code" href="namespacecatalog_access.html#a33">printWarn</a>(origin, <span class="stringliteral">"no row is selected"</span>);
00672     <span class="keywordflow">return</span> <a class="code" href="namespacecatalog_access.html#a35a12">IS_VOID</a>;
00673   }
00674   <span class="keywordflow">if</span> ((srow &lt; 0) || (srow &gt;= <a class="code" href="classcatalog_access_1_1_catalog.html#o26">m_numSelRows</a>)) {
00675     std::ostringstream sortie;
00676     sortie &lt;&lt; <span class="stringliteral">"row must be within [ 0, "</span> &lt;&lt; <a class="code" href="classcatalog_access_1_1_catalog.html#o26">m_numSelRows</a>-1 &lt;&lt; <span class="stringliteral">"]"</span>;
00677     <a class="code" href="namespacecatalog_access.html#a33">printWarn</a>(origin, sortie.str());
00678     <span class="keywordflow">return</span> <a class="code" href="namespacecatalog_access.html#a35a22">BAD_ROW</a>;
00679   }
00680   <span class="keywordflow">return</span> <a class="code" href="classcatalog_access_1_1_catalog.html#o26">m_numSelRows</a>;
00681 }
00682 
00683 <span class="comment">/**********************************************************************/</span>
00684 <span class="comment">// return true if at least one criteria or selection region exist</span>
<a name="l00685"></a><a class="code" href="classcatalog_access_1_1_catalog.html#c27">00685</a> <span class="keyword">inline</span> <span class="keywordtype">bool</span> Catalog::existCriteria(std::vector&lt;bool&gt; *quantSel) {
00686 
00687   <span class="keywordtype">bool</span> all=<span class="keyword">false</span>;
00688   std::vector&lt;Quantity&gt;::const_iterator itQ;
00689   quantSel-&gt;clear();
00690   <span class="keywordflow">try</span> {
00691     <span class="keywordflow">if</span> (!<a class="code" href="classcatalog_access_1_1_catalog.html#o20">m_selRegion</a>) quantSel-&gt;push_back(<span class="keyword">false</span>);
00692     <span class="keywordflow">else</span> { all=<span class="keyword">true</span>;  quantSel-&gt;push_back(<span class="keyword">true</span>); }
00693     <span class="keywordflow">for</span> (itQ=<a class="code" href="classcatalog_access_1_1_catalog.html#o10">m_quantities</a>.begin(); itQ != <a class="code" href="classcatalog_access_1_1_catalog.html#o10">m_quantities</a>.end(); itQ++) {
00694 
00695       <span class="keywordflow">if</span> (itQ-&gt;m_type == Quantity::STRING) {
00696         <span class="keywordflow">if</span> (itQ-&gt;m_listValS.size() &gt; 0) {
00697           all=<span class="keyword">true</span>;
00698           quantSel-&gt;push_back(<span class="keyword">true</span>);
00699         }
00700         <span class="keywordflow">else</span> quantSel-&gt;push_back(<span class="keyword">false</span>);
00701       }
00702 
00703       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (itQ-&gt;m_type == Quantity::NUM) {
00704         <span class="keywordflow">if</span> ( (itQ-&gt;m_lowerCut &lt; <a class="code" href="quantity_8h.html#a0">NO_SEL_CUT</a>)||(itQ-&gt;m_upperCut &lt; <a class="code" href="quantity_8h.html#a0">NO_SEL_CUT</a>)
00705             || (itQ-&gt;m_listValN.size() &gt; 0) ) {
00706           all=<span class="keyword">true</span>;
00707           quantSel-&gt;push_back(<span class="keyword">true</span>);
00708         }
00709         <span class="keywordflow">else</span> quantSel-&gt;push_back(<span class="keyword">false</span>);
00710       }
00711 
00712       <span class="keywordflow">else</span> quantSel-&gt;push_back(<span class="keyword">false</span>);
00713       <span class="comment">// VECTOR quantity are selected by the quantities in m_vectorQs</span>
00714 
00715     }<span class="comment">// loop on quantities</span>
00716   }
00717   <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception &amp;err) {
00718     std::string errText=std::string(<span class="stringliteral">"EXCEPTION on boolean vector: "</span>)+err.what();
00719     <a class="code" href="namespacecatalog_access.html#a32">printErr</a>(<span class="stringliteral">"private existCriteria"</span>, errText);
00720     <span class="keywordflow">throw</span>;
00721   }
00722   <span class="keywordflow">return</span> all;
00723 }
00724 
00725 <span class="comment">/**********************************************************************/</span>
00726 <span class="comment">// return long int to test m_quantities[index] bit in m_rowIsSelected[k]</span>
<a name="l00727"></a><a class="code" href="classcatalog_access_1_1_catalog.html#c28">00727</a> <span class="keyword">inline</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> Catalog::bitPosition(<span class="keyword">const</span> <span class="keywordtype">int</span> index, <span class="keywordtype">int</span> *k) {
00728 
00729   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> test=1ul;
00730   <span class="keywordtype">int</span> pos=index+1; <span class="comment">// position of given criteria in isSelected vector</span>
00731   *k=(pos+1)/(<span class="keyword">sizeof</span>(long)*8);
00732   <span class="comment">// index of m_rowIsSelected with given criteria</span>
00733   <span class="keywordtype">int</span> i=pos+1-(*k)*<span class="keyword">sizeof</span>(long)*8;
00734   <span class="comment">// bit pos.of given criteria in m_rowIsSelected[k]</span>
00735   <span class="keywordtype">int</span> j=0;
00736   <span class="keywordflow">while</span> (j &lt; i) {test*=2ul; j++;}
00737 
00738   <span class="keywordflow">return</span> test;
00739 }
00740 
00741 } <span class="comment">// namespace catalogAccess</span>
00742 <span class="preprocessor">#endif // catalogAccess_cat_h</span>
</pre></div><hr><address style="align: right;"><small>Generated on Mon Jun 20 15:18:14 2005 for catalogAccess by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.18 </small></address>
</body>
</html>
